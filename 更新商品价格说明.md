# 更新商品价格说明

## 问题
商品价格在浏览器中显示未更新，因为只修改了创建脚本，但数据库中的商品价格没有更新。

## 解决方案

### 方案1：运行更新脚本（推荐）

在WSL或Linux环境中运行：

```bash
cd backend
npx ts-node scripts/update-product-prices.ts
```

或者在Windows PowerShell中（如果已安装Node.js）：

```powershell
cd backend
npm run ts-node scripts/update-product-prices.ts
```

### 方案2：重新运行创建脚本

创建脚本已经包含更新逻辑，如果商品已存在会自动更新：

```bash
cd backend
npx ts-node scripts/create-test-products.ts
```

### 方案3：通过API更新（需要认证）

如果后端服务正在运行，可以通过API更新商品价格：

```bash
# 1. 先登录获取token
curl -X POST http://localhost:3001/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"your-email","password":"your-password"}'

# 2. 获取商品列表，找到商品ID
curl http://localhost:3001/api/products

# 3. 更新商品价格（替换YOUR_TOKEN和PRODUCT_ID）
curl -X PUT http://localhost:3001/api/products/PRODUCT_ID \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{"price": 0.01}'
```

### 方案4：直接更新数据库（快速）

如果可以直接访问数据库：

```sql
-- 更新USDT商品价格为0.01
UPDATE products 
SET price = 0.01 
WHERE metadata->>'currency' = 'USDT' 
  AND price > 0.01;

-- 更新USD商品价格为0.1
UPDATE products 
SET price = 0.1 
WHERE metadata->>'currency' = 'USD' 
  AND price > 0.1;

-- 更新CNY商品价格为1
UPDATE products 
SET price = 1 
WHERE metadata->>'currency' = 'CNY' 
  AND price > 1;
```

## 价格更新规则

根据商品类型和货币：

| 货币 | 新价格 | 说明 |
|------|--------|------|
| USDT | 0.01 | 适合BSC测试网USDT测试 |
| USD | 0.1 | 适合法币支付测试 |
| CNY | 1 | 适合人民币支付测试 |

## 验证更新

更新后，刷新浏览器页面，商品价格应该显示为：
- USDT商品：$0.01 USDT
- USD商品：$0.1 USD  
- CNY商品：¥1 CNY

## 注意事项

1. ⚠️ 更新脚本会修改数据库，请确保在测试环境中运行
2. ⚠️ 如果商品正在被使用，更新价格可能影响正在进行的订单
3. ✅ 更新后需要刷新浏览器页面才能看到新价格

