# 快速测试步骤

## 1. 检查服务状态

### 后端服务 (http://localhost:3001)
在浏览器中访问：`http://localhost:3001/api/health`

如果看到响应，说明后端已启动。

### 前端服务 (http://localhost:3000)
在浏览器中访问：`http://localhost:3000`

如果看到首页，说明前端已启动。

---

## 2. 测试智能路由优先推荐数字货币

### 步骤：
1. 打开浏览器，访问：`http://localhost:3000/payment-demo`
2. 点击"体验统一支付流程"按钮
3. 查看支付方式列表

### 预期结果：
- ✅ 数字货币支付选项显示在最前面
- ✅ 价格显示单位为"USDC"
- ✅ 有"⭐ 推荐"标识

---

## 3. 测试支付聚合服务商（无Stripe账户）

### 前提：
确保后端 `.env` 文件中**没有** `STRIPE_SECRET_KEY` 配置

### 步骤：
1. 访问：`http://localhost:3000/payment-demo`
2. 点击"体验统一支付流程"
3. 选择法币支付方式（Apple Pay、Google Pay或信用卡）
4. 完成支付流程

### 预期结果：
- ✅ 支付成功处理
- ✅ 后端日志显示使用聚合服务商（Paddle/Adyen/Checkout.com）

---

## 4. 测试价格显示（USDC单位）

### 步骤：
1. 访问：`http://localhost:3000/payment-demo`
2. 点击"体验统一支付流程"
3. 查看所有支付方式的价格

### 预期结果：
- ✅ 所有价格都显示"USDC"单位
- ✅ 格式：`XX.XX USDC`
- ✅ 价格对比：数字货币 < 法币转数字货币 < Stripe

---

## 5. API测试

### 测试智能路由API

在浏览器或Postman中访问：
```
http://localhost:3001/api/payments/routing?amount=100&currency=CNY&merchantPaymentConfig=both
```

### 预期响应：
```json
{
  "recommendedMethod": "x402",
  "reason": "⭐ 推荐使用X402协议...",
  "priceComparison": {
    "cryptoPrice": 14.001,
    "stripePrice": 14.406,
    "fiatToCryptoPrice": 13.253
  }
}
```

---

## 6. 检查后端日志

### 查看支付聚合服务商日志：
在WSL终端中查看后端日志，应该看到：
```
[PaymentAggregatorService] 通过Paddle处理支付: 100 CNY, method=card
```

### 查看智能路由日志：
应该看到：
```
[SmartRouterService] 推荐支付方式: x402
```

---

## 测试检查清单

- [ ] 后端服务运行正常 (http://localhost:3001/api/health)
- [ ] 前端服务运行正常 (http://localhost:3000)
- [ ] 智能路由优先推荐数字货币支付
- [ ] 价格显示单位为USDC
- [ ] 支付聚合服务商正常工作（无Stripe时）
- [ ] API测试通过
- [ ] 后端日志正常

---

## 如果遇到问题

### 问题1：服务未启动
**解决方法**：
```bash
# 在WSL中启动后端
cd backend && npm run start:dev

# 在WSL中启动前端
cd paymindfrontend && npm run dev
```

### 问题2：支付聚合服务商未触发
**解决方法**：
- 检查 `backend/.env` 文件，确保 `STRIPE_SECRET_KEY` 未配置
- 选择法币支付方式

### 问题3：价格显示不正确
**解决方法**：
- 检查浏览器控制台是否有错误
- 检查后端日志中的价格计算

---

## 测试完成

如果所有测试都通过，说明：
✅ 支付聚合服务商集成成功
✅ 智能路由优化成功
✅ 价格显示单位（USDC）正确

可以开始正式使用了！

