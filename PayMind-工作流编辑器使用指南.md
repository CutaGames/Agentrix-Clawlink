# PayMind Agent Builder 工作流编辑器使用指南

## 📍 访问路径

### 方式1：直接访问（推荐）
```
http://localhost:3000/agent-builder
```

### 方式2：通过导航菜单
1. 访问官网首页：`http://localhost:3000`
2. 点击顶部导航栏的 **"Agent Builder"** 或 **"Agent 工作台"**
3. 在Agent工作台页面（`/agent-enhanced`）的左侧边栏，点击 **"⚡ Agent Builder"** 按钮

### 方式3：从Agent页面进入
1. 访问 `http://localhost:3000/agent`
2. 点击页面顶部的 **"⚡ Agent Builder"** 按钮

## 🎯 使用步骤

### 第1步：选择模板
1. 在Agent Builder页面左侧，浏览并选择一个模板
2. 模板分类包括：
   - 自动购物 / 比价
   - 空投捕获 / Auto-Earn
   - Launchpad / 打新
   - 商户小二 / 销售
   - 开发者 SDK / API
   - 个人助手

### 第2步：配置基本信息
1. 填写Agent名称
2. 填写Agent描述
3. 点击"下一步"

### 第3步：配置能力
1. 选择核心能力（AI聚合搜索、SmartPay、自动任务等）
2. 配置支付限额（QuickPay单笔阈值、每日阈值）
3. 填写收益收款地址
4. 启用/禁用Auto-Earn
5. 点击"下一步"

### 第4步：工作流编辑器（新功能）✨
**这就是工作流编辑器所在的位置！**

1. **添加节点**
   - 点击 **"+ 添加节点"** 按钮
   - 从节点面板选择节点类型：
     - 🎯 **意图（Intent）**：触发条件（对话、时间、Webhook、API）
     - ⚡ **操作（Action）**：执行操作（调用API、脚本、支付）
     - 🔀 **决策（Decision）**：条件判断（if/else）
     - ⏳ **等待（Wait）**：等待时间/事件
     - 🔄 **循环（Loop）**：循环执行
     - 🔗 **Webhook**：接收Webhook
     - 📢 **通知（Notify）**：发送通知

2. **配置节点**
   - 点击画布上的节点
   - 右侧会显示配置面板
   - 根据节点类型配置：
     - **意图节点**：选择触发类型（消息/时间/Webhook/API），设置匹配模式
     - **操作节点**：选择操作类型（API调用/脚本/支付），设置API端点
     - **决策节点**：设置条件表达式
     - **等待节点**：设置等待时间（秒）
     - 所有节点都可以设置：超时时间、重试次数

3. **连接节点**
   - 当前版本使用简化的连接可视化
   - 后续版本将支持拖拽连接

4. **保存工作流**
   - 点击 **"保存工作流"** 按钮
   - 工作流定义会保存到Agent配置中

### 第5步：授权与支付
1. 查看授权配置说明
2. 启用/禁用监控
3. 点击"下一步"

### 第6步：预览与发布
1. 预览生成的代码
2. 点击"部署"或"保存为草稿"
3. Agent创建成功后，会跳转到Agent管理页面

## 🎨 界面说明

### 工作流编辑器界面布局

```
┌─────────────────────────────────────────────────────────┐
│  工具栏 [+ 添加节点] [保存工作流]  节点数: X              │
├──────────┬──────────────────────────────┬───────────────┤
│          │                              │               │
│  节点    │        画布区域              │   配置面板    │
│  面板    │    (工作流可视化)            │  (节点配置)   │
│          │                              │               │
│  [🎯意图]│    [节点1] → [节点2]         │  节点类型:    │
│  [⚡操作]│                              │  触发类型:    │
│  [🔀决策]│                              │  匹配模式:    │
│  [⏳等待]│                              │  超时时间:    │
│  [🔄循环]│                              │  重试次数:    │
│  [🔗Webhook]│                          │               │
│  [📢通知]│                              │               │
│          │                              │               │
└──────────┴──────────────────────────────┴───────────────┘
```

## 💡 使用技巧

1. **从简单开始**：先添加一个意图节点和一个操作节点，理解基本流程
2. **使用决策节点**：根据条件执行不同的操作
3. **配置超时和重试**：确保工作流的可靠性
4. **保存工作流**：定期保存，避免丢失

## 🔧 当前功能状态

### ✅ 已实现
- 节点添加和删除
- 节点类型选择（7种类型）
- 节点配置面板
- 工作流保存
- 简化的连接可视化

### ⏳ 待完善
- 拖拽式节点连接（需要集成React Flow）
- 工作流验证（检查循环、未连接节点等）
- 工作流测试（模拟执行）
- 工作流导入/导出（JSON格式）

## 📝 注意事项

1. **工作流是可选的**：如果不需要复杂工作流，可以跳过第3步
2. **节点配置**：每个节点都需要正确配置才能正常工作
3. **连接顺序**：确保节点连接顺序符合业务逻辑
4. **保存工作流**：记得点击"保存工作流"按钮

## 🚀 快速体验

1. 访问：`http://localhost:3000/agent-builder`
2. 选择一个模板（如"个人助手"）
3. 填写名称和描述
4. 配置能力（可以快速填写）
5. **进入第3步，体验工作流编辑器！**

## 🎯 下一步

工作流编辑器会持续优化，后续将支持：
- 更强大的拖拽连接
- 工作流模板库
- 可视化调试
- 工作流版本管理

