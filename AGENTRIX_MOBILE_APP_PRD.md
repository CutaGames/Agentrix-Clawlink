# Agentrix 移动端 App PRD

**版本**: 1.0  
**日期**: 2026-02-01  
**状态**: Draft  
**负责人**: 产品/研发/设计

---

## 1. 背景与目标

### 1.1 背景
Agentrix 已具备完整的支付、分佣、预算池与结算能力（Commerce Skill），但移动端缺少统一入口，导致商家/开发者无法随时管理收入与项目。

### 1.2 目标
- 提供移动端一站式管理入口
- 支持核心业务：分佣计划、预算池、结算与分佣预览
- 与现有后端/合约无缝对接（HTTP API + 合约事件）

### 1.3 目标用户
- 商家：管理分佣与结算
- 开发者：管理收益与预算池
- 运营/财务：查看结算与账本

---

## 2. 业务范围

### 2.1 核心模块（MVP）
1. **首页仪表盘**
2. **分佣计划管理**
3. **预算池与里程碑管理**
4. **结算与账本**
5. **分佣预览/模拟器**
6. **设置（API、环境、授权）**
7. **统一资金账户（基础视图）**
8. **Agent 账户体系（基础视图）**

### 2.2 非 MVP（后续）
- 推送与告警
- 数据导出与报表
- 多语言与多币种
- 钱包连接（EVM/Solana）
- Onramp/Offramp 订单状态追踪

---

## 3. 用户故事

### 3.1 商家用户
- 作为商家，我希望随时查看分佣计划列表和状态
- 作为商家，我希望快速预览一笔交易的分佣分配
- 作为商家，我希望查看结算流水与状态

### 3.2 开发者用户
- 作为开发者，我希望查看预算池的资金与里程碑
- 作为开发者，我希望追踪里程碑提交与释放状态

### 3.3 运营/财务
- 作为财务，我希望查看结算明细并筛选状态
- 作为运营，我希望查看收入趋势与分佣结构

---

## 4. 功能需求

### 4.1 首页仪表盘
- 概览卡片：分佣计划数、预算池数、待结算金额
- 快捷入口：分佣计划、预算池、结算、预览

### 4.1.1 统一资金账户（核心基础）
- 资金账户视图：法币余额 / 加密余额 / 在途结算 / 冻结或预留
- 账本视图：按订单/预算池/里程碑拆分的资金流
- 权限与子账户：主账户-子账户-项目账户隔离
- 钱包功能：多链地址管理、收款码、签名授权、冷/热钱包策略

### 4.1.2 Agent 账户体系（与工作台一致）
- Agent 身份页：能力、评级、收益、任务完成率
- Agent 收益中心：分佣计划绑定、预算池参与、里程碑结算
- Agent “一键接单/抢单”：对接预算池里程碑

### 4.2 分佣计划管理
- 列表：名称、类型、状态、分佣费率
- 详情：规则、费率配置、创建时间
- 操作：查看/筛选（MVP 不含编辑）

### 4.3 预算池与里程碑
- 预算池列表：名称、总预算、已注资、状态
- 预算池详情：里程碑列表、状态、参与方
- 里程碑详情：提交/审批/释放（阶段二）
 - 项目协作：里程碑提交、审批、打款提醒
 - 轻量审批流：移动端高频审批优化

### 4.4 结算与账本
- 结算列表：订单/里程碑、金额、状态
- 账本摘要：收入/支出/净额（阶段二）

### 4.5 分佣预览
- 输入：金额、币种、支付类型
- 输出：费用明细、分配结果、净额

### 4.6 杀手级功能（建议选 1-2 个落地）
- 一键收款 + 自动分账：生成分享链接或二维码，支付后自动按分佣计划拆分
- Agent 任务市场（移动端抢单）：预算池里程碑上架，移动端快速投标/接单
- 跨境收款极速结算：多币种自动换汇 + 费率透明 + 预计到账时间
- “收益预测”与“分佣模拟”：输入金额/模式，实时算净额与到账时间

### 4.7 传播与增长（移动端优势）
- 交易链接分享（微信/WhatsApp/Telegram），可追踪来源与转化
- “推广员”身份：分享链接自动绑定分佣
- 邀请返利 + 任务激励：移动端一键转发
- 轻量化“收款页”模板：快速创建可传播收款页

### 4.6 设置
- API Base URL
- Token/授权
- 环境切换（sandbox/production）

---

## 5. API 对接

### 5.1 后端接口
- GET /commerce/split-plans
- POST /commerce/split-plans/preview
- GET /commerce/budget-pools
- GET /commerce/settlements

### 5.2 数据模型对齐
- SplitPlan, BudgetPool, Settlement, AllocationPreview
- 参考：backend commerce DTO 与 frontend commerce.api.ts

---

## 6. 交互与 UX

- 深色主题（与 Agentrix Web 一致）
- 重要数据卡片化
- 列表支持下拉刷新
- 关键操作（如设置保存）需反馈提示

---

## 6.1 社交功能（建议）

### 6.1.1 核心社交场景
- **交易分享**：收款链接/二维码一键分享（微信/Telegram/WhatsApp），自动带邀请/分佣参数
- **Agent 主页**：公开可分享的 Agent Profile（能力、案例、评分、收益统计）
- **任务动态**：里程碑提交/审批/释放形成动态流，便于展示与传播

### 6.1.2 社交关系与增长
- **关注/订阅**：关注某 Agent 的任务更新与收益里程碑
- **推荐链路**：分享链接绑定推荐关系，直接用于分佣或推广奖励
- **轻量名片**：移动端可生成可传播的 Agent 名片（二维码 + 公开技能/服务）

### 6.1.3 内容与激励
- **案例卡片**：自动生成“任务完成/收益达成”卡片，可一键分享
- **排行榜/成就**：周榜/成就徽章（完成里程碑数、收益里程碑）
- **推广激励**：邀请返利、拉新任务、裂变活动

---

## 7. 技术方案

### 7.1 技术栈
- React Native + Expo
- TypeScript
- React Navigation

### 7.2 架构
- services 层：API 封装
- screens 层：页面逻辑
- components 层：可复用 UI
- theme 层：颜色与样式

---

## 8. 里程碑与计划

### Phase 1（MVP，2 周）
- 首页仪表盘
- 分佣计划列表
- 预算池列表
- 结算列表
- 分佣预览
- 设置
- 统一资金账户（基础视图）
- Agent 账户体系（基础视图）

### Phase 2（增强，2 周）
- 预算池详情 + 里程碑详情
- 结算详情 + 筛选
- 账本摘要
- 项目协作与审批流
- 任务市场（基础）

### Phase 3（扩展，2-4 周）
- 钱包连接
- 推送与告警
- 报表导出
- 多语言
- 一键收款 + 自动分账（传播增长）
- 轻量化收款页模板

---

## 9. 风险与约束

- 订单与结算当前存储为内存结构（后端需补 DB）
- 幂等性缓存生产需 Redis
- 若需要链上执行，需钱包或 relayer 支持

---

## 10. 关键指标

- DAU/WAU
- 结算查看次数
- 分佣预览使用次数
- 预算池活跃度

---

## 11. 附录

### 11.1 费用规则
- 纯 Crypto：0%
- Onramp：+0.1%
- Offramp：+0.1%
- Split：0.3%（最低 0.1 USDC）

### 11.2 支付类型
- crypto_direct | onramp | offramp | mixed
