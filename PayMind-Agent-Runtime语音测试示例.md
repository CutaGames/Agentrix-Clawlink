# PayMind Agent Runtime 语音测试示例

## 🎤 语音测试完整示例

### 示例1：完整电商流程（语音版）

**场景**：用户通过语音完成整个购物流程

```
👤 用户（语音）："我想买跑步鞋"
   ↓ 语音转文字："我想买跑步鞋"
   ↓ Runtime 识别意图：product_search
   ↓ 启动 ecommerce Workflow
   ↓ 执行 ProductSearchSkill
   ↓ 保存搜索结果到 Memory
   
🤖 Agent（文字 + 语音）："找到 5 个相关商品：
   1. Nike Air Max - ¥899
   2. Adidas Ultraboost - ¥1299
   3. New Balance 990 - ¥1099
   4. Asics Gel-Nimbus - ¥1199
   5. Brooks Ghost - ¥999
   
   请选择要购买的商品。"

👤 用户（语音）："第一个加入购物车"
   ↓ 语音转文字："第一个加入购物车"
   ↓ Runtime 识别意图：add_to_cart
   ↓ 从 Memory 获取第一个商品（Nike Air Max）
   ↓ 执行 AddToCartSkill
   ↓ 保存购物车到 Memory
   
🤖 Agent（文字 + 语音）："✅ 已加入购物车！
   
   📦 商品信息：
   • 商品：Nike Air Max
   • 数量：1
   • 单价：¥899
   
   💡 您可以：
   • 说"查看购物车"查看所有商品
   • 说"结算"或"下单"来创建订单"

👤 用户（语音）："结算"
   ↓ 语音转文字："结算"
   ↓ Runtime 识别意图：checkout
   ↓ 继续 Workflow
   ↓ 执行 CheckoutSkill
   ↓ 创建订单
   ↓ 保存订单到 Memory
   
🤖 Agent（文字 + 语音）："✅ 订单创建成功！
   
   📦 订单信息：
   • 订单号：ORD-20250129-001
   • 商品数量：1
   • 订单总额：¥899
   • 订单状态：pending
   
   💡 下一步：
   • 说"支付"或"付款"来完成支付"

👤 用户（语音）："支付"
   ↓ 语音转文字："支付"
   ↓ Runtime 识别意图：payment
   ↓ 继续 Workflow
   ↓ 从 Memory 获取订单
   ↓ 执行 PaymentSkill
   ↓ 创建支付
   
🤖 Agent（文字 + 语音）："✅ 支付创建成功！
   
   💳 支付信息：
   • 支付号：PAY-20250129-001
   • 订单号：ORD-20250129-001
   • 支付金额：¥899
   • 支付方式：wallet
   • 支付状态：pending
   
   💡 请完成支付以完成订单。"
```

---

### 示例2：上下文引用（语音版）

**场景**：用户通过语音引用之前的搜索结果

```
👤 用户（语音）："搜索手机"
   ↓ 语音转文字："搜索手机"
   ↓ Runtime 处理搜索
   ↓ 保存搜索结果到 Memory
   
🤖 Agent："找到 3 个手机：
   1. iPhone 15 Pro - ¥8999
   2. Samsung Galaxy S24 - ¥6999
   3. Xiaomi 14 - ¥3999"

👤 用户（语音）："第二个加入购物车"
   ↓ 语音转文字："第二个加入购物车"
   ↓ Runtime 从 Memory 获取第二个商品（Samsung Galaxy S24）
   ↓ 执行 AddToCartSkill
   
🤖 Agent："✅ 已加入购物车！Samsung Galaxy S24"

👤 用户（语音）："第一个也加入购物车"
   ↓ 语音转文字："第一个也加入购物车"
   ↓ Runtime 从 Memory 获取第一个商品（iPhone 15 Pro）
   ↓ 执行 AddToCartSkill
   
🤖 Agent："✅ 已加入购物车！iPhone 15 Pro"
```

**关键点**：
- ✅ 语音识别结果与文本输入处理完全相同
- ✅ Memory 系统支持语音输入的上下文引用
- ✅ "第一个"、"第二个"等引用在语音中同样有效

---

### 示例3：混合输入（文本 + 语音）

**场景**：用户混合使用文本和语音输入

```
👤 用户（文本）："搜索笔记本电脑"
   ↓ Runtime 处理搜索
   ↓ 保存到 Memory
   
🤖 Agent："找到 5 个笔记本电脑..."

👤 用户（语音）："第一个加入购物车"
   ↓ 语音转文字："第一个加入购物车"
   ↓ Runtime 从 Memory 获取第一个商品
   ↓ 执行 AddToCartSkill
   
🤖 Agent："✅ 已加入购物车！"

👤 用户（文本）："结算"
   ↓ Runtime 处理结算
   
🤖 Agent："✅ 订单创建成功！"

👤 用户（语音）："支付"
   ↓ 语音转文字："支付"
   ↓ Runtime 处理支付
   
🤖 Agent："✅ 支付创建成功！"
```

**关键点**：
- ✅ 文本和语音输入可以无缝切换
- ✅ Runtime 统一处理，不区分输入方式
- ✅ Memory 和 Workflow 状态在文本和语音之间共享

---

## 🎯 语音测试要点

### 1. 语音识别准确性

**测试重点**：
- 清晰发音的商品名称
- 数字识别（"第一个"、"第二个"）
- 指令识别（"搜索"、"加入购物车"、"结算"、"支付"）

**建议**：
- 使用标准普通话
- 在安静环境中测试
- 说话清晰，语速适中

### 2. 上下文引用

**测试重点**：
- 语音输入后能否正确引用（"第一个"、"第二个"）
- Memory 是否保存了搜索结果
- 跨轮次引用是否正常

**示例**：
```
用户（语音）："搜索手机"
Agent：显示 3 个手机

用户（语音）："第一个加入购物车"
Agent：✅ 应该知道"第一个"是哪个手机
```

### 3. 流程串联

**测试重点**：
- 语音输入能否启动 Workflow
- 语音输入能否继续 Workflow
- 流程状态是否正确跟踪

**示例**：
```
用户（语音）："我想买跑步鞋" → 启动 Workflow
用户（语音）："第一个加入购物车" → 继续 Workflow
用户（语音）："结算" → 继续 Workflow
用户（语音）："支付" → 完成 Workflow
```

---

## 📊 语音测试检查清单

### 基础功能

- [ ] 麦克风权限请求正常
- [ ] 语音识别启动正常
- [ ] 语音转文字准确
- [ ] 识别结果自动发送
- [ ] 语音输出播放正常

### Runtime 集成

- [ ] 语音输入的商品搜索正常
- [ ] 语音输入的加入购物车正常
- [ ] 语音输入的结算正常
- [ ] 语音输入的支付正常
- [ ] 语音输入的上下文引用正常
- [ ] 语音输入的流程串联正常

### 用户体验

- [ ] 语音输入响应及时
- [ ] 语音输出清晰自然
- [ ] 错误提示友好
- [ ] 可以随时切换文本/语音输入

---

## 🚀 开始语音测试

1. **打开 Agent 对话界面**
2. **点击麦克风按钮**
3. **允许浏览器访问麦克风**
4. **开始说话**
5. **观察识别结果和 Agent 回复**
6. **测试完整流程**

---

**祝语音测试顺利！** 🎤✨

