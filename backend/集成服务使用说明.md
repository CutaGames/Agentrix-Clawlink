# é›†æˆæœåŠ¡ä½¿ç”¨è¯´æ˜

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•å°†Mockå®ç°æ›¿æ¢ä¸ºçœŸå®çš„å¤–éƒ¨æœåŠ¡é›†æˆã€‚

---

## ğŸ”§ DEXé›†æˆæœåŠ¡

### æœåŠ¡ä½ç½®
- `backend/src/integrations/dex/dex-integration.service.ts`

### éœ€è¦é›†æˆçš„API

#### 1. Jupiter (Solana)
- **APIæ–‡æ¡£**: https://docs.jup.ag/
- **ä»·æ ¼æŸ¥è¯¢**: `GET https://quote-api.jup.ag/v6/quote`
- **äº¤æ˜“æ‰§è¡Œ**: éœ€è¦æ„å»ºSolanaäº¤æ˜“å¹¶ç­¾å

#### 2. Uniswap (Ethereum)
- **APIæ–‡æ¡£**: https://docs.uniswap.org/
- **ä»·æ ¼æŸ¥è¯¢**: GraphQL API
- **äº¤æ˜“æ‰§è¡Œ**: ä½¿ç”¨Web3.js/Ethers.jsè°ƒç”¨åˆçº¦

#### 3. PancakeSwap (BSC)
- **APIæ–‡æ¡£**: https://docs.pancakeswap.finance/
- **ä»·æ ¼æŸ¥è¯¢**: REST API
- **äº¤æ˜“æ‰§è¡Œ**: ä½¿ç”¨Web3.jsè°ƒç”¨åˆçº¦

### é›†æˆæ­¥éª¤

1. **å®‰è£…ä¾èµ–**:
```bash
npm install @solana/web3.js ethers axios
```

2. **æ›´æ–°`getPrice`æ–¹æ³•**:
```typescript
async getPrice(chain: string, pair: string, dex?: string): Promise<DEXPrice[]> {
  if (chain === 'solana' && (!dex || dex === 'jupiter')) {
    const response = await axios.get('https://quote-api.jup.ag/v6/quote', {
      params: { inputMint: 'SOL', outputMint: 'USDC', amount: 1000000 }
    });
    // è§£æå“åº”å¹¶è¿”å›ä»·æ ¼
  }
  // ... å…¶ä»–DEX
}
```

3. **æ›´æ–°`executeTrade`æ–¹æ³•**:
```typescript
async executeTrade(trade: DEXTrade): Promise<DEXTradeResult> {
  if (trade.chain === 'solana') {
    // æ„å»ºSolanaäº¤æ˜“
    const transaction = await buildTransaction(...);
    // ç­¾åå¹¶å‘é€
    const signature = await wallet.sendTransaction(transaction);
    return { success: true, transactionHash: signature };
  }
  // ... å…¶ä»–é“¾
}
```

---

## ğŸš€ Launchpadé›†æˆæœåŠ¡

### æœåŠ¡ä½ç½®
- `backend/src/integrations/launchpad/launchpad-integration.service.ts`

### éœ€è¦é›†æˆçš„API

#### 1. Pump.fun
- **APIæ–‡æ¡£**: éœ€è¦æŸ¥çœ‹Pump.funå®˜æ–¹æ–‡æ¡£
- **é¡¹ç›®å‘ç°**: æŸ¥è¯¢Solanaé“¾ä¸Šæ•°æ®
- **è´­ä¹°**: æ„å»ºå¹¶å‘é€Solanaäº¤æ˜“

#### 2. Raydium AcceleRaytor
- **APIæ–‡æ¡£**: https://docs.raydium.io/
- **é¡¹ç›®å‘ç°**: REST API
- **è´­ä¹°**: æ„å»ºå¹¶å‘é€Solanaäº¤æ˜“

#### 3. TON Memepad
- **APIæ–‡æ¡£**: éœ€è¦æŸ¥çœ‹TONé“¾æ–‡æ¡£
- **é¡¹ç›®å‘ç°**: æŸ¥è¯¢TONé“¾ä¸Šæ•°æ®
- **è´­ä¹°**: æ„å»ºå¹¶å‘é€TONäº¤æ˜“

### é›†æˆæ­¥éª¤

1. **æ›´æ–°`discoverProjects`æ–¹æ³•**:
```typescript
async discoverProjects(platform: string): Promise<LaunchpadProjectInfo[]> {
  if (platform === 'pump.fun') {
    // æŸ¥è¯¢Solanaé“¾ä¸ŠPump.funåˆçº¦æ•°æ®
    const projects = await queryPumpFunProjects();
    return projects;
  }
  // ... å…¶ä»–å¹³å°
}
```

2. **æ›´æ–°`purchaseProject`æ–¹æ³•**:
```typescript
async purchaseProject(purchase: LaunchpadPurchase): Promise<LaunchpadPurchaseResult> {
  if (purchase.platform === 'pump.fun') {
    // æ„å»ºè´­ä¹°äº¤æ˜“
    const transaction = await buildPurchaseTransaction(...);
    // ç­¾åå¹¶å‘é€
    const signature = await wallet.sendTransaction(transaction);
    return { success: true, transactionHash: signature };
  }
  // ... å…¶ä»–å¹³å°
}
```

---

## ğŸ¤– AIé›†æˆæœåŠ¡

### æœåŠ¡ä½ç½®
- `backend/src/integrations/ai/ai-integration.service.ts`

### éœ€è¦é›†æˆçš„API

#### 1. OpenAI GPT
- **APIæ–‡æ¡£**: https://platform.openai.com/docs/api-reference
- **ç«¯ç‚¹**: `POST https://api.openai.com/v1/chat/completions`
- **è®¤è¯**: Bearer Token

#### 2. Anthropic Claude
- **APIæ–‡æ¡£**: https://docs.anthropic.com/claude/reference
- **ç«¯ç‚¹**: `POST https://api.anthropic.com/v1/messages`
- **è®¤è¯**: x-api-key Header

#### 3. æœ¬åœ°AIæ¨¡å‹
- **æ”¯æŒ**: Ollama, Local LLMç­‰
- **ç«¯ç‚¹**: è‡ªå®šä¹‰æœ¬åœ°API

### é›†æˆæ­¥éª¤

1. **å®‰è£…ä¾èµ–**:
```bash
npm install openai @anthropic-ai/sdk axios
```

2. **æ›´æ–°`generateResponse`æ–¹æ³•**:
```typescript
async generateResponse(request: AIRequest): Promise<AIResponse> {
  const model = request.model || 'gpt-4';
  
  if (model.startsWith('gpt')) {
    const openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY });
    const completion = await openai.chat.completions.create({
      model: model,
      messages: request.messages,
      temperature: request.temperature,
      max_tokens: request.maxTokens,
    });
    return {
      message: completion.choices[0].message.content,
      confidence: 0.9,
    };
  }
  
  if (model.startsWith('claude')) {
    const anthropic = new Anthropic({ apiKey: process.env.ANTHROPIC_API_KEY });
    const message = await anthropic.messages.create({
      model: model,
      messages: request.messages,
      max_tokens: request.maxTokens,
    });
    return {
      message: message.content[0].text,
      confidence: 0.9,
    };
  }
  
  // ... å…¶ä»–æ¨¡å‹
}
```

3. **æ›´æ–°`makeOrderDecision`æ–¹æ³•**:
```typescript
async makeOrderDecision(request: OrderDecisionRequest): Promise<OrderDecision> {
  const prompt = `åˆ†æä»¥ä¸‹è®¢å•æ•°æ®ï¼Œå†³å®šæ˜¯å¦æ¥å—è®¢å•ï¼š
è®¢å•é‡‘é¢: ${request.orderData.amount}
å®¢æˆ·å†å²: ${JSON.stringify(request.orderData.customerHistory)}
è¯·è¿”å›JSONæ ¼å¼: {"decision": "accept|reject|manual_review", "reason": "...", "confidence": 0.0-1.0, "riskScore": 0.0-1.0}`;

  const response = await this.generateResponse({
    messages: [
      { role: 'system', content: 'ä½ æ˜¯ä¸€ä¸ªè®¢å•é£é™©è¯„ä¼°AIåŠ©æ‰‹ã€‚' },
      { role: 'user', content: prompt },
    ],
    model: 'gpt-4',
  });

  // è§£æAIè¿”å›çš„JSON
  const decision = JSON.parse(response.message);
  return decision;
}
```

---

## âš™ï¸ é…ç½®ç¯å¢ƒå˜é‡

åœ¨`.env`æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```env
# DEX APIé…ç½®
JUPITER_API_URL=https://quote-api.jup.ag/v6
JUPITER_API_KEY=your_jupiter_api_key
RAYDIUM_API_URL=https://api.raydium.io
RAYDIUM_API_KEY=your_raydium_api_key
UNISWAP_API_URL=https://api.thegraph.com/subgraphs/name/uniswap
UNISWAP_API_KEY=your_uniswap_api_key
ONEINCH_API_URL=https://api.1inch.io/v5.0
ONEINCH_API_KEY=your_1inch_api_key
PANCAKESWAP_API_URL=https://api.pancakeswap.info/api/v2
PANCAKESWAP_API_KEY=your_pancakeswap_api_key

# Launchpad APIé…ç½®
PUMPFUN_API_URL=https://pump.fun/api
PUMPFUN_API_KEY=your_pumpfun_api_key
RAYDIUM_ACCELERAYTOR_API_URL=https://acceleraytor.raydium.io/api
RAYDIUM_ACCELERAYTOR_API_KEY=your_raydium_acceleraytor_api_key
TON_MEMEPAD_API_URL=https://ton-memepad.api
TON_MEMEPAD_API_KEY=your_ton_memepad_api_key

# AI APIé…ç½®
OPENAI_API_KEY=your_openai_api_key
OPENAI_API_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-4
ANTHROPIC_API_KEY=your_anthropic_api_key
ANTHROPIC_API_URL=https://api.anthropic.com/v1
ANTHROPIC_MODEL=claude-3-opus
LOCAL_AI_API_URL=http://localhost:8000
LOCAL_AI_MODEL=local
```

---

## ğŸ”„ æ›´æ–°æœåŠ¡ä»¥ä½¿ç”¨é›†æˆæœåŠ¡

### 1. æ›´æ–°ArbitrageService

```typescript
constructor(
  @InjectRepository(AutoEarnTask)
  private taskRepository: Repository<AutoEarnTask>,
  private dexIntegration: DEXIntegrationService, // æ³¨å…¥DEXé›†æˆæœåŠ¡
) {}

async scanArbitrageOpportunities(...): Promise<ArbitrageOpportunity[]> {
  // ä½¿ç”¨DEXé›†æˆæœåŠ¡è·å–ä»·æ ¼
  const prices = await this.dexIntegration.getPrice(chain, pair);
  // æ¯”è¾ƒä»·æ ¼ï¼Œå‘ç°å¥—åˆ©æœºä¼š
  // ...
}
```

### 2. æ›´æ–°LaunchpadService

```typescript
constructor(
  @InjectRepository(AutoEarnTask)
  private taskRepository: Repository<AutoEarnTask>,
  private launchpadIntegration: LaunchpadIntegrationService, // æ³¨å…¥Launchpadé›†æˆæœåŠ¡
) {}

async discoverLaunchpadProjects(...): Promise<LaunchpadProject[]> {
  // ä½¿ç”¨Launchpadé›†æˆæœåŠ¡å‘ç°é¡¹ç›®
  const projects = await this.launchpadIntegration.discoverProjects(platform);
  // ...
}
```

### 3. æ›´æ–°MerchantAICustomerService

```typescript
constructor(
  @InjectRepository(Product)
  private productRepository: Repository<Product>,
  @InjectRepository(ConversationHistory)
  private conversationHistoryRepository: Repository<ConversationHistory>,
  private aiIntegration: AIIntegrationService, // æ³¨å…¥AIé›†æˆæœåŠ¡
) {}

async handleCustomerMessage(...): Promise<AIResponse> {
  // ä½¿ç”¨AIé›†æˆæœåŠ¡ç”Ÿæˆå›å¤
  const response = await this.aiIntegration.generateResponse({
    messages: [...],
    model: 'gpt-4',
  });
  // ...
}
```

---

## âœ… æµ‹è¯•

é›†æˆçœŸå®æœåŠ¡åï¼Œéœ€è¦ï¼š

1. **å•å…ƒæµ‹è¯•**: æµ‹è¯•å„ä¸ªé›†æˆæœåŠ¡çš„åŠŸèƒ½
2. **é›†æˆæµ‹è¯•**: æµ‹è¯•æœåŠ¡ä¹‹é—´çš„åä½œ
3. **ç«¯åˆ°ç«¯æµ‹è¯•**: æµ‹è¯•å®Œæ•´çš„ä¸šåŠ¡æµç¨‹

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **APIé™æµ**: æ³¨æ„å„APIçš„é™æµç­–ç•¥ï¼Œå®ç°é‡è¯•å’Œé€€é¿æœºåˆ¶
2. **é”™è¯¯å¤„ç†**: å¦¥å–„å¤„ç†APIè°ƒç”¨å¤±è´¥çš„æƒ…å†µ
3. **å®‰å…¨æ€§**: å¦¥å–„ä¿ç®¡APIå¯†é’¥ï¼Œä¸è¦æäº¤åˆ°ä»£ç ä»“åº“
4. **æˆæœ¬æ§åˆ¶**: æ³¨æ„AI APIçš„è°ƒç”¨æˆæœ¬ï¼Œå®ç°ç¼“å­˜å’Œä¼˜åŒ–
5. **ç›‘æ§**: æ·»åŠ æ—¥å¿—å’Œç›‘æ§ï¼Œè·Ÿè¸ªAPIè°ƒç”¨æƒ…å†µ

---

**æœ€åæ›´æ–°**: 2024å¹´1æœˆ

