# æ•°æ®åº“ä¿®å¤ - æœ€ç»ˆæ­¥éª¤

## å‘ç°çš„é—®é¢˜

1. âœ… å®é™…æ•°æ®åº“åæ˜¯ `paymind`ï¼ˆä¸æ˜¯ `paymind_db`ï¼‰
2. âœ… å·²æ›´æ–°é…ç½®æ–‡ä»¶é»˜è®¤å€¼
3. âš ï¸ éœ€è¦æ‰§è¡Œ SQL ä¿®å¤

## æ‰§è¡Œä¿®å¤ï¼ˆåœ¨ WSL ç»ˆç«¯ä¸­ï¼‰

```bash
cd /mnt/d/wsl/Ubuntu-24.04/Code/Paymind/paymind-website/backend

# ä½¿ç”¨ postgres ç”¨æˆ·æ‰§è¡Œä¿®å¤è„šæœ¬ï¼ˆæ•°æ®åº“åæ˜¯ paymindï¼‰
PGPASSWORD='postgres' psql -U postgres -d paymind -h localhost -f scripts/fix-with-postgres.sql
```

## å¦‚æœä¸Šé¢çš„å‘½ä»¤ä¸è¡Œï¼Œæ‰‹åŠ¨æ‰§è¡Œ

```bash
# 1. è¿æ¥åˆ°æ•°æ®åº“
PGPASSWORD='postgres' psql -U postgres -d paymind -h localhost
```

ç„¶ååœ¨ `psql` æç¤ºç¬¦ä¸‹æ‰§è¡Œï¼š

```sql
DELETE FROM agent_sessions WHERE "userId" IS NULL;
ALTER TABLE agent_sessions DROP CONSTRAINT IF EXISTS "FK_40a6b0600d60c067ae0f8659ce0";
ALTER TABLE agent_sessions ALTER COLUMN "userId" SET NOT NULL;
\q
```

## ä¿®å¤å

é‡å¯åç«¯æœåŠ¡ï¼š

```bash
cd backend
npm run start:dev
```

åº”è¯¥çœ‹åˆ°ï¼š
```
ğŸš€ PayMind Backend is running on: http://0.0.0.0:3001
ğŸ“š API Documentation: http://0.0.0.0:3001/api/docs
```

## å·²å®Œæˆçš„é…ç½®æ›´æ–°

- âœ… ç»Ÿä¸€äº† `database.config.ts` å’Œ `data-source.ts` çš„é»˜è®¤å€¼
- âœ… æ›´æ–°é»˜è®¤æ•°æ®åº“åä¸º `paymind`ï¼ˆä¸å®é™…æ•°æ®åº“ä¸€è‡´ï¼‰
- âœ… åˆ›å»ºäº†ä¿®å¤è„šæœ¬ï¼š`scripts/fix-with-postgres.sql`

