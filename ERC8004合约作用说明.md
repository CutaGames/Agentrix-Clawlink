                                            # ERC8004 åˆçº¦ä½œç”¨è¯´æ˜

**ç‰ˆæœ¬**: V7.0  
**æ—¥æœŸ**: 2025å¹´1æœˆ  
**æ ‡å‡†**: ERC-8004 (Session Key ç®¡ç†æ ‡å‡†)

---

## ğŸ“‹ ç›®å½•

1. [åˆçº¦æ¦‚è¿°](#1-åˆçº¦æ¦‚è¿°)
2. [æ ¸å¿ƒåŠŸèƒ½](#2-æ ¸å¿ƒåŠŸèƒ½)
3. [åœ¨æ”¯ä»˜æµç¨‹ä¸­çš„ä½œç”¨](#3-åœ¨æ”¯ä»˜æµç¨‹ä¸­çš„ä½œç”¨)
4. [åç«¯é›†æˆä½ç½®](#4-åç«¯é›†æˆä½ç½®)
5. [å·¥ä½œæµç¨‹](#5-å·¥ä½œæµç¨‹)
6. [å®‰å…¨æœºåˆ¶](#6-å®‰å…¨æœºåˆ¶)
7. [éƒ¨ç½²ä¸é…ç½®](#7-éƒ¨ç½²ä¸é…ç½®)

---

## 1. åˆçº¦æ¦‚è¿°

### 1.1 åˆçº¦ä¿¡æ¯

- **åˆçº¦åç§°**: `ERC8004SessionManager`
- **æ–‡ä»¶ä½ç½®**: `contract/contracts/ERC8004SessionManager.sol`
- **éƒ¨ç½²è„šæœ¬**: `contract/scripts/deploy-erc8004.ts`
- **æ ‡å‡†**: ERC-8004 (Session Key ç®¡ç†æ ‡å‡†)

### 1.2 è®¾è®¡ç›®çš„

ERC8004 åˆçº¦æ˜¯ Agentrix QuickPay å…å¯†æ”¯ä»˜çš„æ ¸å¿ƒæ™ºèƒ½åˆçº¦ï¼Œå®ç°ï¼š

- âœ… **Session Key ç®¡ç†**: ç”¨æˆ·åˆ›å»ºå…å¯†æˆæƒé¢åº¦
- âœ… **é™é¢æ§åˆ¶**: å•ç¬”å’Œæ¯æ—¥é™é¢åŒé‡ä¿æŠ¤
- âœ… **ç­¾åéªŒè¯**: é“¾ä¸ŠéªŒè¯ Session Key ç­¾å
- âœ… **æ‰¹é‡æ‰§è¡Œ**: æ”¯æŒæ‰¹é‡æ”¯ä»˜ï¼ŒèŠ‚çœ Gas
- âœ… **è‡ªåŠ¨é‡ç½®**: æ¯æ—¥é™é¢è‡ªåŠ¨é‡ç½®

---

## 2. æ ¸å¿ƒåŠŸèƒ½

### 2.1 Session æ•°æ®ç»“æ„

```solidity
struct Session {
    address signer;           // Session Key åœ°å€ï¼ˆç”¨äºç­¾åï¼‰
    address owner;            // ä¸»é’±åŒ…åœ°å€ï¼ˆèµ„é‡‘ä»è¯¥åœ°å€æ‰£é™¤ï¼‰
    uint256 singleLimit;      // å•ç¬”é™é¢ï¼ˆUSDCï¼Œ6 decimalsï¼‰
    uint256 dailyLimit;       // æ¯æ—¥é™é¢ï¼ˆUSDCï¼Œ6 decimalsï¼‰
    uint256 usedToday;        // ä»Šæ—¥å·²ç”¨ï¼ˆUSDCï¼Œ6 decimalsï¼‰
    uint256 expiry;           // è¿‡æœŸæ—¶é—´æˆ³
    uint256 lastResetDate;    // ä¸Šæ¬¡é‡ç½®æ—¥æœŸï¼ˆç”¨äºæ¯æ—¥é™é¢é‡ç½®ï¼‰
    bool isActive;           // æ˜¯å¦æ¿€æ´»
}
```

### 2.2 ä¸»è¦å‡½æ•°

#### `createSession()` - åˆ›å»º Session

```solidity
function createSession(
    address signer,
    uint256 singleLimit,
    uint256 dailyLimit,
    uint256 expiry
) external returns (bytes32 sessionId)
```

**åŠŸèƒ½**:
- ç”¨æˆ·é€šè¿‡ä¸»é’±åŒ…åˆ›å»º Session
- è®¾ç½®å•ç¬”å’Œæ¯æ—¥é™é¢
- è®¾ç½®è¿‡æœŸæ—¶é—´
- ç”Ÿæˆ Session ID (bytes32)
- è®°å½•åˆ°é“¾ä¸Š `sessions` mapping

**è°ƒç”¨è€…**: ç”¨æˆ·ä¸»é’±åŒ…

#### `executeWithSession()` - æ‰§è¡Œæ”¯ä»˜

```solidity
function executeWithSession(
    bytes32 sessionId,
    address to,
    uint256 amount,
    bytes32 paymentId,
    bytes calldata signature
) external onlyRelayer
```

**åŠŸèƒ½**:
- éªŒè¯ Session Key ç­¾å
- æ£€æŸ¥å•ç¬”é™é¢
- æ£€æŸ¥æ¯æ—¥é™é¢ï¼ˆè‡ªåŠ¨é‡ç½®ï¼‰
- ä»ç”¨æˆ·é’±åŒ…è½¬è´¦ USDC åˆ°æ”¶æ¬¾åœ°å€
- æ›´æ–°å·²ç”¨é¢åº¦

**è°ƒç”¨è€…**: Relayerï¼ˆåªæœ‰ Relayer å¯ä»¥è°ƒç”¨ï¼‰

#### `executeBatchWithSession()` - æ‰¹é‡æ‰§è¡Œ

```solidity
function executeBatchWithSession(
    bytes32[] calldata sessionIds,
    address[] calldata recipients,
    uint256[] calldata amounts,
    bytes32[] calldata paymentIds,
    bytes[] calldata signatures
) external onlyRelayer
```

**åŠŸèƒ½**:
- æ‰¹é‡å¤„ç†å¤šä¸ªæ”¯ä»˜
- æœ€å¤š 50 ç¬”/æ‰¹æ¬¡
- èŠ‚çœ Gas è´¹ç”¨

#### `getSession()` - æŸ¥è¯¢ Session

```solidity
function getSession(bytes32 sessionId) 
    external view returns (Session memory)
```

**åŠŸèƒ½**:
- æŸ¥è¯¢ Session è¯¦æƒ…
- ç”¨äº Pre-Flight Check å’ŒçŠ¶æ€éªŒè¯

#### `getUserSessions()` - è·å–ç”¨æˆ·æ‰€æœ‰ Session

```solidity
function getUserSessions(address user) 
    external view returns (bytes32[])
```

**åŠŸèƒ½**:
- è·å–ç”¨æˆ·çš„æ‰€æœ‰ Session ID
- ç”¨äºæŸ¥æ‰¾æ´»è·ƒ Session

#### `revokeSession()` - æ’¤é”€ Session

```solidity
function revokeSession(bytes32 sessionId) external
```

**åŠŸèƒ½**:
- ç”¨æˆ·å¯éšæ—¶æ’¤é”€ Session
- è®¾ç½® `isActive = false`
- é˜²æ­¢åç»­æ”¯ä»˜

---

## 3. åœ¨æ”¯ä»˜æµç¨‹ä¸­çš„ä½œç”¨

### 3.1 QuickPay æ”¯ä»˜æµç¨‹

```
ç”¨æˆ·åˆ›å»º Session
    â†“
ERC8004.createSession() (é“¾ä¸Š)
    â†“
Session è®°å½•åˆ°é“¾ä¸Š
    â†“
ç”¨æˆ·æ”¯ä»˜æ—¶ä½¿ç”¨ Session Key ç­¾å
    â†“
RelayerService é“¾ä¸‹éªŒè¯ç­¾å
    â†“
å³æ—¶ç¡®è®¤æ”¯ä»˜ï¼ˆç”¨æˆ·æ— éœ€ç­‰å¾…ï¼‰
    â†“
åŠ å…¥é˜Ÿåˆ—ï¼Œå¼‚æ­¥è°ƒç”¨ ERC8004.executeWithSession()
    â†“
é“¾ä¸Šæ‰§è¡Œè½¬è´¦ï¼Œä»ç”¨æˆ·é’±åŒ…æ‰£é™¤ USDC
```

### 3.2 å…³é”®ä½œç”¨ç‚¹

1. **Session åˆ›å»º**: ç”¨æˆ·æˆæƒå…å¯†é¢åº¦
2. **çŠ¶æ€æŸ¥è¯¢**: Pre-Flight Check æ—¶æŸ¥è¯¢ Session çŠ¶æ€
3. **æ”¯ä»˜æ‰§è¡Œ**: Relayer ä»£ä¸ºæ‰§è¡Œé“¾ä¸Šæ”¯ä»˜
4. **é™é¢æ§åˆ¶**: åˆçº¦å±‚é¢å¼ºåˆ¶æ‰§è¡Œå•ç¬”å’Œæ¯æ—¥é™é¢

---

## 4. åç«¯é›†æˆä½ç½®

### 4.1 PreflightCheckService

**æ–‡ä»¶**: `backend/src/modules/payment/preflight-check.service.ts`

**ä½œç”¨**: Pre-Flight Check æ—¶æŸ¥è¯¢ Session çŠ¶æ€

```typescript
// åˆå§‹åŒ–åˆçº¦è¿æ¥
private sessionManagerContract: Contract | null = null;

private initializeContracts() {
  const contractAddress = this.configService.get<string>('ERC8004_CONTRACT_ADDRESS');
  if (contractAddress) {
    this.sessionManagerContract = new Contract(
      contractAddress,
      ERC8004_ABI,
      this.provider,
    );
  }
}

// æŸ¥è¯¢ç”¨æˆ· Session åˆ—è¡¨
private async getUserSessions(walletAddress: string): Promise<string[]> {
  if (!this.sessionManagerContract) return [];
  return await this.sessionManagerContract.getUserSessions(walletAddress);
}

// æŸ¥è¯¢ Session è¯¦æƒ…
private async getSessionFromChain(sessionId: string) {
  if (!this.sessionManagerContract) return null;
  return await this.sessionManagerContract.getSession(sessionId);
}
```

**ä½¿ç”¨åœºæ™¯**:
- æ”¯ä»˜å‰æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰æ´»è·ƒ Session
- éªŒè¯ Session é™é¢æ˜¯å¦è¶³å¤Ÿ
- åˆ¤æ–­ QuickPay æ˜¯å¦å¯ç”¨

### 4.2 RelayerService

**æ–‡ä»¶**: `backend/src/modules/relayer/relayer.service.ts`

**ä½œç”¨**: Relayer ä»£ä¸ºæ‰§è¡Œé“¾ä¸Šæ”¯ä»˜

```typescript
// åˆå§‹åŒ–åˆçº¦è¿æ¥ï¼ˆä½¿ç”¨ Relayer é’±åŒ…ï¼‰
private sessionManagerContract: Contract | null = null;

private initializeRelayer() {
  const contractAddress = this.configService.get<string>('ERC8004_CONTRACT_ADDRESS');
  if (contractAddress) {
    this.sessionManagerContract = new Contract(
      contractAddress,
      ERC8004_ABI,
      this.relayerWallet,  // ä½¿ç”¨ Relayer é’±åŒ…
    );
  }
}

// æ‰§è¡Œæ”¯ä»˜ï¼ˆé“¾ä¸Šï¼‰
private async executePaymentOnChain(dto: QuickPayRequest) {
  if (!this.sessionManagerContract) {
    throw new Error('Session manager contract not initialized');
  }

  const tx = await this.sessionManagerContract.executeWithSession(
    dto.sessionId,
    dto.to,
    dto.amount,
    dto.paymentId,
    dto.signature,
  );

  return tx.hash;
}
```

**ä½¿ç”¨åœºæ™¯**:
- é“¾ä¸‹éªŒè¯é€šè¿‡åï¼Œå¼‚æ­¥ä¸Šé“¾æ‰§è¡Œ
- æ‰¹é‡å¤„ç†å¤šä¸ªæ”¯ä»˜
- ä»ç”¨æˆ·é’±åŒ…è½¬è´¦ USDC

### 4.3 SessionService

**æ–‡ä»¶**: `backend/src/modules/session/session.service.ts`

**ä½œç”¨**: ç”¨æˆ·åˆ›å»º Session æ—¶è°ƒç”¨åˆçº¦

```typescript
// åˆ›å»º Sessionï¼ˆé“¾ä¸Šï¼‰
async createSession(userId: string, dto: CreateSessionDto) {
  // 1. è·å–ç”¨æˆ·é’±åŒ…
  const wallet = await this.walletRepository.findOne({
    where: { userId, isDefault: true },
  });

  // 2. ç”Ÿæˆ Session Key
  const sessionKey = Wallet.createRandom();

  // 3. è°ƒç”¨åˆçº¦åˆ›å»º Session
  const tx = await this.sessionManagerContract.createSession(
    sessionKey.address,
    parseUnits(dto.singleLimit.toString(), 6),
    parseUnits(dto.dailyLimit.toString(), 6),
    expiryTimestamp,
  );

  // 4. ç­‰å¾…ç¡®è®¤
  await tx.wait();

  // 5. ä¿å­˜åˆ°æ•°æ®åº“
  const session = this.sessionRepository.create({
    userId,
    sessionId: tx.hash,
    signer: sessionKey.address,
    // ...
  });

  return this.sessionRepository.save(session);
}
```

**ä½¿ç”¨åœºæ™¯**:
- ç”¨æˆ·åœ¨å‰ç«¯åˆ›å»º QuickPay Session
- è°ƒç”¨åˆçº¦åˆ›å»ºé“¾ä¸Š Session
- ä¿å­˜ Session ä¿¡æ¯åˆ°æ•°æ®åº“

---

## 5. å·¥ä½œæµç¨‹

### 5.1 Session åˆ›å»ºæµç¨‹

```
1. ç”¨æˆ·åœ¨å‰ç«¯ç‚¹å‡»"åˆ›å»º Session"
   â†“
2. å‰ç«¯è°ƒç”¨ SessionService.createSession()
   â†“
3. åç«¯ç”Ÿæˆ Session Key
   â†“
4. è°ƒç”¨ ERC8004.createSession() (é“¾ä¸Š)
   â†“
5. ç­‰å¾…é“¾ä¸Šç¡®è®¤
   â†“
6. ä¿å­˜ Session ä¿¡æ¯åˆ°æ•°æ®åº“
   â†“
7. è¿”å› Session ID ç»™å‰ç«¯
```

### 5.2 QuickPay æ”¯ä»˜æµç¨‹

```
1. ç”¨æˆ·ç‚¹å‡»æ”¯ä»˜
   â†“
2. PreflightCheckService æŸ¥è¯¢ Session çŠ¶æ€
   - è°ƒç”¨ ERC8004.getUserSessions()
   - è°ƒç”¨ ERC8004.getSession()
   â†“
3. å‰ç«¯ä½¿ç”¨ Session Key ç­¾åæ”¯ä»˜æ¶ˆæ¯
   â†“
4. è°ƒç”¨ RelayerService.processQuickPay()
   â†“
5. é“¾ä¸‹éªŒè¯ç­¾åï¼ˆæ¯«ç§’çº§ï¼‰
   â†“
6. å³æ—¶ç¡®è®¤æ”¯ä»˜ï¼ˆç”¨æˆ·æ— éœ€ç­‰å¾…ï¼‰
   â†“
7. åŠ å…¥é˜Ÿåˆ—ï¼Œå¼‚æ­¥è°ƒç”¨ ERC8004.executeWithSession()
   â†“
8. é“¾ä¸Šæ‰§è¡Œè½¬è´¦
   - éªŒè¯ç­¾å
   - æ£€æŸ¥é™é¢
   - è½¬è´¦ USDC
   - æ›´æ–°å·²ç”¨é¢åº¦
```

### 5.3 æ‰¹é‡æ”¯ä»˜æµç¨‹

```
1. å¤šä¸ªæ”¯ä»˜è¯·æ±‚åŠ å…¥é˜Ÿåˆ—
   â†“
2. å®šæ—¶æ‰¹é‡å¤„ç†ï¼ˆæ¯ 10 ç§’æˆ–è¾¾åˆ° 50 ç¬”ï¼‰
   â†“
3. è°ƒç”¨ ERC8004.executeBatchWithSession()
   â†“
4. æ‰¹é‡æ‰§è¡Œè½¬è´¦ï¼ˆèŠ‚çœ Gasï¼‰
```

---

## 6. å®‰å…¨æœºåˆ¶

### 6.1 ç­¾åéªŒè¯

```solidity
// æ„å»ºæ¶ˆæ¯å“ˆå¸Œï¼ˆEIP-191 æ ‡å‡†ï¼‰
bytes32 messageHash = keccak256(
    abi.encodePacked(
        "\x19Ethereum Signed Message:\n32",
        keccak256(
            abi.encodePacked(
                sessionId,
                to,
                amount,
                paymentId,
                block.chainid
            )
        )
    )
);

// æ¢å¤ç­¾åè€…åœ°å€
address recoveredSigner = recoverSigner(messageHash, signature);

// éªŒè¯ç­¾åè€…æ˜¯å¦ä¸º Session Key
require(recoveredSigner == session.signer, "Invalid signature");
```

**ä¿æŠ¤æªæ–½**:
- ä½¿ç”¨ EIP-191 æ ‡å‡†ç­¾å
- åŒ…å« chainId é˜²æ­¢è·¨é“¾é‡æ”¾
- åŒ…å« paymentId é˜²æ­¢é‡å¤æ”¯ä»˜

### 6.2 é™é¢æ§åˆ¶

```solidity
// æ£€æŸ¥å•ç¬”é™é¢
require(amount <= session.singleLimit, "Exceeds single limit");

// æ£€æŸ¥æ¯æ—¥é™é¢
require(
    session.usedToday + amount <= session.dailyLimit,
    "Exceeds daily limit"
);
```

**ä¿æŠ¤æªæ–½**:
- å•ç¬”é™é¢ï¼šé˜²æ­¢å¤§é¢è¯¯æ“ä½œ
- æ¯æ—¥é™é¢ï¼šé˜²æ­¢è´¦æˆ·è¢«ç›—ç”¨
- è‡ªåŠ¨é‡ç½®ï¼šæ¯æ—¥é™é¢æ¯å¤©è‡ªåŠ¨é‡ç½®

### 6.3 æƒé™æ§åˆ¶

```solidity
modifier onlyRelayer() {
    require(msg.sender == relayer, "Only relayer can execute");
    _;
}
```

**ä¿æŠ¤æªæ–½**:
- åªæœ‰ Relayer å¯ä»¥æ‰§è¡Œæ”¯ä»˜
- é˜²æ­¢æ¶æ„è°ƒç”¨
- Relayer åœ°å€ç”±åˆçº¦ Owner è®¾ç½®

### 6.4 é‡å…¥ä¿æŠ¤

```solidity
contract ERC8004SessionManager is Ownable, ReentrancyGuard {
    function executeWithSession(...) 
        external 
        onlyRelayer 
        validSession(sessionId) 
        nonReentrant  // é‡å…¥ä¿æŠ¤
    {
        // ...
    }
}
```

**ä¿æŠ¤æªæ–½**:
- ä½¿ç”¨ OpenZeppelin çš„ `ReentrancyGuard`
- é˜²æ­¢é‡å…¥æ”»å‡»

### 6.5 é˜²é‡æ”¾

**é“¾ä¸‹**:
- ä½¿ç”¨ nonce é˜²æ­¢é‡æ”¾
- RelayerService ç»´æŠ¤ nonce æ˜ å°„

**é“¾ä¸Š**:
- åŒ…å« paymentId é˜²æ­¢é‡å¤æ”¯ä»˜
- åŒ…å« chainId é˜²æ­¢è·¨é“¾é‡æ”¾

---

## 7. éƒ¨ç½²ä¸é…ç½®

### 7.1 éƒ¨ç½²æ­¥éª¤

```bash
# 1. è¿›å…¥åˆçº¦ç›®å½•
cd contract

# 2. å®‰è£…ä¾èµ–
npm install

# 3. é…ç½®ç½‘ç»œï¼ˆ.env æˆ– hardhat.config.tsï¼‰
# RPC_URL=https://data-seed-prebsc-1-s1.binance.org:8545/
# PRIVATE_KEY=0x...

# 4. éƒ¨ç½²åˆçº¦
npx hardhat run scripts/deploy-erc8004.ts --network bscTestnet
```

### 7.2 ç¯å¢ƒå˜é‡é…ç½®

**åç«¯ `.env`**:
```env
# ERC8004 åˆçº¦åœ°å€
ERC8004_CONTRACT_ADDRESS=0x...

# USDC ä»£å¸åœ°å€ï¼ˆBSC Testnet ä½¿ç”¨ USDTï¼‰
USDC_ADDRESS=0x337610d27c682E347C9cD60BD4b3b107C9d34dDd

# Relayer é…ç½®
RELAYER_PRIVATE_KEY=0x...
RELAYER_ADDRESS=0x...

# RPC èŠ‚ç‚¹
RPC_URL=https://data-seed-prebsc-1-s1.binance.org:8545/
```

### 7.3 åˆçº¦åˆå§‹åŒ–

éƒ¨ç½²åéœ€è¦è®¾ç½® Relayer åœ°å€ï¼š

```typescript
// åœ¨éƒ¨ç½²è„šæœ¬ä¸­è‡ªåŠ¨è®¾ç½®
await sessionManager.setRelayer(relayerAddress);
```

æˆ–è€…æ‰‹åŠ¨è°ƒç”¨ï¼š

```solidity
// åªæœ‰ Owner å¯ä»¥è®¾ç½®
sessionManager.setRelayer(relayerAddress);
```

### 7.4 éªŒè¯åˆçº¦

```bash
# ä½¿ç”¨ Hardhat éªŒè¯
npx hardhat verify --network bscTestnet \
  <CONTRACT_ADDRESS> \
  <USDC_ADDRESS>
```

---

## 8. å…³é”®é…ç½®é¡¹

### 8.1 åˆçº¦åœ°å€

- **BSC Testnet**: éƒ¨ç½²åä»éƒ¨ç½²è„šæœ¬è·å–
- **ç¯å¢ƒå˜é‡**: `ERC8004_CONTRACT_ADDRESS`
- **ä½¿ç”¨ä½ç½®**: PreflightCheckService, RelayerService, SessionService

### 8.2 Relayer é…ç½®

- **Relayer åœ°å€**: å¿…é¡»åœ¨åˆçº¦ä¸­è®¾ç½®ï¼ˆ`setRelayer()`ï¼‰
- **Relayer ç§é’¥**: ç”¨äºæ”¯ä»˜ Gas è´¹ç”¨
- **æƒé™**: åªæœ‰ Relayer å¯ä»¥è°ƒç”¨ `executeWithSession()`

### 8.3 USDC ä»£å¸åœ°å€

- **BSC Testnet**: `0x337610d27c682E347C9cD60BD4b3b107C9d34dDd` (USDT)
- **Mainnet**: æ ¹æ®ç½‘ç»œä¸åŒä½¿ç”¨å¯¹åº”çš„ USDC åœ°å€

---

## 9. å¸¸è§é—®é¢˜

### Q1: åˆçº¦æœªåˆå§‹åŒ–æ€ä¹ˆåŠï¼Ÿ

**A**: å¦‚æœ `ERC8004_CONTRACT_ADDRESS` æœªè®¾ç½®ï¼Œç³»ç»Ÿä¼šè¿›å…¥ Mock æ¨¡å¼ï¼š
- PreflightCheckService è¿”å›ç©º Session åˆ—è¡¨
- RelayerService è·³è¿‡é“¾ä¸Šæ‰§è¡Œ
- å‰ç«¯ä¼šæ˜¾ç¤ºè­¦å‘Šä¿¡æ¯

### Q2: Relayer åœ°å€æœªè®¾ç½®æ€ä¹ˆåŠï¼Ÿ

**A**: éƒ¨ç½²åˆçº¦åå¿…é¡»è°ƒç”¨ `setRelayer()` è®¾ç½® Relayer åœ°å€ï¼Œå¦åˆ™æ— æ³•æ‰§è¡Œæ”¯ä»˜ã€‚

### Q3: å¦‚ä½•æ’¤é”€ Sessionï¼Ÿ

**A**: ç”¨æˆ·å¯ä»¥è°ƒç”¨ `revokeSession(sessionId)` æ’¤é”€ Sessionï¼Œè®¾ç½® `isActive = false`ã€‚

### Q4: æ¯æ—¥é™é¢ä½•æ—¶é‡ç½®ï¼Ÿ

**A**: åˆçº¦ä¼šè‡ªåŠ¨æ£€æŸ¥ï¼Œå¦‚æœå½“å‰æ—¥æœŸå¤§äº `lastResetDate`ï¼Œä¼šè‡ªåŠ¨é‡ç½® `usedToday = 0`ã€‚

---

## 10. ç›¸å…³æ–‡æ¡£

- [Agentrix æ”¯ä»˜æµç¨‹æ–‡æ¡£](./Agentrixæ”¯ä»˜æµç¨‹æ–‡æ¡£-æœ€æ–°ç‰ˆ.md)
- [ERC8004SessionManager åˆçº¦æºç ](./contract/contracts/ERC8004SessionManager.sol)
- [éƒ¨ç½²è„šæœ¬](./contract/scripts/deploy-erc8004.ts)
- [RelayerService æºç ](./backend/src/modules/relayer/relayer.service.ts)
- [PreflightCheckService æºç ](./backend/src/modules/payment/preflight-check.service.ts)

---

**æ–‡æ¡£ç»´æŠ¤**: Agentrix å¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°**: 2025å¹´1æœˆ

