# 待修复问题记录

## 创建时间
2025-12-02

## 问题列表

### 1. 购物车功能问题 ⚠️ 高优先级

**问题描述**：
- 加入购物车时显示浏览器 alert 提示"加入成功"，但实际没有加入成功，购物车还是空的
- 商品加入购物车按钮点击后，虽然显示成功提示，但购物车数据没有更新

**相关文件**：
- `agentrixfrontend/components/agent/StructuredResponseCard.tsx` - `handleAddToCart` 函数
- `agentrixfrontend/lib/api/cart.api.ts` - `addItem` API调用
- `backend/src/modules/agent/agent.controller.ts` - 购物车API端点

**可能原因**：
- API调用成功但数据没有正确返回
- sessionId 传递问题
- 购物车刷新逻辑问题

### 2. 购物车UI交互问题 ⚠️ 高优先级

**问题描述**：
- 加入购物车的商品无法在UI上直接增减商品数量
- 无法在UI上直接删除商品

**状态**：
- 代码已实现 `SelectableCart` 组件的数量调整和删除功能
- 但实际使用中可能存在问题

**相关文件**：
- `agentrixfrontend/components/agent/SelectableCart.tsx`
- `agentrixfrontend/components/agent/StructuredResponseCard.tsx`

### 3. 订单取消功能问题 ⚠️ 中优先级

**问题描述**：
- 查看订单部分无法直接取消未支付的商品

**状态**：
- 已修复：只显示 `pending` 状态的订单取消按钮
- 但可能还有其他问题

**相关文件**：
- `agentrixfrontend/components/agent/StructuredResponseCard.tsx`

### 4. 汇率转换问题 ⚠️ 中优先级

**问题描述**：
- 支付时RMB定价没有按照汇率转USDC/USDT

**状态**：
- 代码中已有汇率转换逻辑
- 但实际转换可能不正确

**相关文件**：
- `agentrixfrontend/components/payment/SmartCheckout.tsx`

### 5. 支付成功提示问题 ✅ 已修复

**问题描述**：
- 支付成功后跳出浏览器 alert，不是网页UI的方式

**状态**：
- ✅ 已创建 `PaymentSuccessModal` 组件
- ✅ 已替换 alert 为 UI 弹窗

### 6. 订单列表显示问题 ✅ 已修复

**问题描述**：
- 订单界面已取消的还保留在列表中
- 已支付的订单还有取消按钮

**状态**：
- ✅ 已过滤掉已取消的订单
- ✅ 只显示 pending 状态的订单取消按钮

---

## 下一步计划

1. 优先修复购物车功能问题（加入购物车失败）
2. 修复购物车UI交互问题（数量调整、删除）
3. 验证汇率转换逻辑
4. 全面测试所有功能

