# PayMind æŠ€æœ¯å¼€å‘æ–‡æ¡£ V3.0
## Web3 ç›´æ¥å‘è¡Œä¸äº¤æ˜“å¹³å°

**ç‰ˆæœ¬**: 3.0  
**æ—¥æœŸ**: 2025å¹´1æœˆ  
**åŸºäº**: å•†ä¸šè®¡åˆ’ä¹¦ V3.0 + PRD V3.0

---

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#1-é¡¹ç›®æ¦‚è¿°)
2. [å½“å‰å·²å®ç°åŠŸèƒ½](#2-å½“å‰å·²å®ç°åŠŸèƒ½)
3. [æ–°å¢åŠŸèƒ½éœ€æ±‚](#3-æ–°å¢åŠŸèƒ½éœ€æ±‚)
4. [å‰ç«¯å¼€å‘å†…å®¹](#4-å‰ç«¯å¼€å‘å†…å®¹)
5. [åç«¯å¼€å‘å†…å®¹](#5-åç«¯å¼€å‘å†…å®¹)
6. [æ™ºèƒ½åˆçº¦å¼€å‘å†…å®¹](#6-æ™ºèƒ½åˆçº¦å¼€å‘å†…å®¹)
7. [å¼€å‘è®¡åˆ’](#7-å¼€å‘è®¡åˆ’)
8. [äº¤ä»˜ç‰©æ¸…å•](#8-äº¤ä»˜ç‰©æ¸…å•)

---

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®å®šä½

**PayMind = Agent çº§äº¤æ˜“èƒ½åŠ›çš„åŸºç¡€è®¾æ–½å±‚ + Web3 åŸç”Ÿå‘è¡Œä¸äº¤æ˜“å¹³å°**

### 1.2 æ ¸å¿ƒæ–°å¢åŠŸèƒ½

1. **Web3 ç›´æ¥å‘è¡ŒåŠŸèƒ½**ï¼ˆé€šè¿‡ PayMind Agent å®ç°ï¼‰
   - ä»£å¸å‘è¡Œï¼ˆERC-20ã€SPL Tokenï¼‰
   - NFT å‘è¡Œï¼ˆERC-721ã€ERC-1155ã€SPL-NFTï¼‰
   - Launchpad åŠŸèƒ½ï¼ˆé¢„å”®ã€ç™½åå•ï¼‰

2. **ç›´æ¥äº¤æ˜“åŠŸèƒ½**ï¼ˆé€šè¿‡ PayMind Agent å®ç°ï¼‰
   - ä»£å¸ç›´æ¥äº¤æ˜“ï¼ˆç‚¹å¯¹ç‚¹ï¼Œæ— éœ€ç»è¿‡ DEXï¼‰
   - NFT ç›´æ¥äº¤æ˜“ï¼ˆç‚¹å¯¹ç‚¹ï¼Œæ— éœ€ç»è¿‡ NFT å¸‚åœºï¼‰

3. **æ™ºèƒ½åˆçº¦éƒ¨ç½²æœåŠ¡**
   - è‡ªåŠ¨éƒ¨ç½²ä»£å¸åˆçº¦
   - è‡ªåŠ¨éƒ¨ç½² NFT åˆçº¦
   - è‡ªåŠ¨éƒ¨ç½²é”€å”®åˆçº¦

4. **å…ƒæ•°æ®å­˜å‚¨æœåŠ¡**
   - IPFS é›†æˆ
   - Arweave é›†æˆ

### 1.3 æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PayMind Agent (å‰ç«¯)                   â”‚
â”‚  - å¯¹è¯å¼äº¤äº’ç•Œé¢                                        â”‚
â”‚  - æ–‡ä»¶ä¸Šä¼ æ”¯æŒ                                          â”‚
â”‚  - æ„å›¾è¯†åˆ«å’Œå¼•å¯¼                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Backend API (NestJS)                  â”‚
â”‚  - ä»£å¸å‘è¡ŒæœåŠ¡                                          â”‚
â”‚  - NFT å‘è¡ŒæœåŠ¡                                          â”‚
â”‚  - Launchpad æœåŠ¡                                        â”‚
â”‚  - æ™ºèƒ½åˆçº¦éƒ¨ç½²æœåŠ¡                                      â”‚
â”‚  - å…ƒæ•°æ®å­˜å‚¨æœåŠ¡                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Blockchain (Ethereum/Solana/BSC)           â”‚
â”‚  - ä»£å¸åˆçº¦ (ERC-20 / SPL Token)                        â”‚
â”‚  - NFT åˆçº¦ (ERC-721 / ERC-1155 / SPL-NFT)             â”‚
â”‚  - é”€å”®åˆçº¦ (TokenSale / NFTSale)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. å½“å‰å·²å®ç°åŠŸèƒ½

### 2.1 å‰ç«¯ï¼ˆFrontendï¼‰

#### âœ… å·²å®Œæˆ
- **Agent èŠå¤©ç•Œé¢** (`AgentChat.tsx`, `AgentChatV3.tsx`)
- **Marketplace å•†å“å±•ç¤º** (`MarketplaceView.tsx`)
- **è´­ç‰©è½¦** (`ShoppingCart.tsx`)
- **ç»Ÿä¸€æ”¯ä»˜æ¨¡æ€æ¡†** (`UserFriendlyPaymentModalV2.tsx`)
- **ä»£ç ç”Ÿæˆå™¨** (`CodeGenerator.tsx`)
- **ç»“æ„åŒ–æ¶ˆæ¯å¡ç‰‡** (`StructuredMessageCard.tsx`)
- **Agent å·¥ä½œæµå†å²** (`AgentWorkflowHistory.tsx`)
- **Agent ä¾§è¾¹æ ** (`AgentSidebar.tsx`)
- **Agent é¡¶éƒ¨å¯¼èˆª** (`AgentTopNav.tsx`)

#### âš ï¸ éƒ¨åˆ†å®ç°
- **æ²™ç®±æµ‹è¯•** (`Sandbox.tsx`) - æ¨¡æ‹Ÿå®ç°

### 2.2 åç«¯ï¼ˆBackendï¼‰

#### âœ… å·²å®Œæˆ
- **æ”¯ä»˜æœåŠ¡** (`PaymentService`, `SmartRouterService`)
- **æ‰˜ç®¡äº¤æ˜“** (`EscrowService`)
- **ç»“ç®—æœåŠ¡** (`CommissionCalculatorService`, `CommissionService`)
- **Agent æœåŠ¡** (`AgentService`, `AgentController`)
- **å•†å“æœåŠ¡** (`ProductService`)
- **æ¨èæœåŠ¡** (`RecommendationService`)
- **æç°æœåŠ¡** (`WithdrawalService`)

#### âš ï¸ éƒ¨åˆ†å®ç°
- **Provider API é›†æˆ** - æ¡†æ¶å®Œæˆï¼ŒAPI è°ƒç”¨æ¨¡æ‹Ÿ
- **æ™ºèƒ½åˆçº¦äº¤äº’** - å…¨éƒ¨æ¨¡æ‹Ÿ

### 2.3 æ™ºèƒ½åˆçº¦ï¼ˆSmart Contractsï¼‰

#### âš ï¸ æœªå®ç°
- **ä»£å¸åˆçº¦** - å­˜åœ¨ä½†æœªéƒ¨ç½²
- **NFT åˆçº¦** - ä¸å­˜åœ¨
- **é”€å”®åˆçº¦** - ä¸å­˜åœ¨
- **åˆçº¦éƒ¨ç½²æœåŠ¡** - ä¸å­˜åœ¨

---

## 3. æ–°å¢åŠŸèƒ½éœ€æ±‚

### 3.1 Web3 ç›´æ¥å‘è¡ŒåŠŸèƒ½

#### 3.1.1 ä»£å¸å‘è¡ŒåŠŸèƒ½

**åŠŸèƒ½æè¿°**ï¼š
- é€šè¿‡ Agent å¯¹è¯æ”¶é›†ä»£å¸ä¿¡æ¯
- è‡ªåŠ¨éƒ¨ç½² ERC-20 / SPL Token åˆçº¦
- è‡ªåŠ¨åˆ›å»ºå•†å“ SKU
- è‡ªåŠ¨ä¸Šæ¶åˆ° Marketplace

**ä¼˜å…ˆçº§**ï¼šP0ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰

#### 3.1.2 NFT å‘è¡ŒåŠŸèƒ½

**åŠŸèƒ½æè¿°**ï¼š
- é€šè¿‡ Agent å¯¹è¯æ”¶é›† NFT ä¿¡æ¯
- æ”¯æŒæ–‡ä»¶ä¸Šä¼ ï¼ˆå›¾ç‰‡/è§†é¢‘/éŸ³é¢‘ï¼‰
- è‡ªåŠ¨éƒ¨ç½² ERC-721 / ERC-1155 / SPL-NFT åˆçº¦
- æ‰¹é‡ Mint NFT
- è‡ªåŠ¨ä¸Šä¼ å…ƒæ•°æ®åˆ° IPFS/Arweave
- è‡ªåŠ¨åˆ›å»ºå•†å“ SKU
- è‡ªåŠ¨ä¸Šæ¶åˆ° Marketplace

**ä¼˜å…ˆçº§**ï¼šP0ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰

#### 3.1.3 Launchpad åŠŸèƒ½

**åŠŸèƒ½æè¿°**ï¼š
- ä»£å¸é¢„å”®
- NFT é¢„å”®
- ç™½åå•ç®¡ç†
- è‡ªåŠ¨åˆ†å‘

**ä¼˜å…ˆçº§**ï¼šP1ï¼ˆé‡è¦åŠŸèƒ½ï¼‰

### 3.2 ç›´æ¥äº¤æ˜“åŠŸèƒ½

#### 3.2.1 ä»£å¸ç›´æ¥äº¤æ˜“

**åŠŸèƒ½æè¿°**ï¼š
- é€šè¿‡ Agent æ˜¾ç¤ºä»£å¸ä¿¡æ¯
- æ”¯æŒç›´æ¥è´­ä¹°ä»£å¸
- è°ƒç”¨æ™ºèƒ½åˆçº¦æ‰§è¡Œäº¤æ˜“
- è‡ªåŠ¨å®Œæˆæ”¯ä»˜å’Œèµ„äº§è½¬ç§»

**ä¼˜å…ˆçº§**ï¼šP0ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰

#### 3.2.2 NFT ç›´æ¥äº¤æ˜“

**åŠŸèƒ½æè¿°**ï¼š
- é€šè¿‡ Agent æ˜¾ç¤º NFT ä¿¡æ¯
- æ”¯æŒç›´æ¥è´­ä¹° NFT
- è°ƒç”¨æ™ºèƒ½åˆçº¦æ‰§è¡Œäº¤æ˜“
- è‡ªåŠ¨åˆ†é…ç‰ˆç¨ç»™åˆ›ä½œè€…

**ä¼˜å…ˆçº§**ï¼šP0ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰

### 3.3 åŸºç¡€è®¾æ–½åŠŸèƒ½

#### 3.3.1 æ™ºèƒ½åˆçº¦éƒ¨ç½²æœåŠ¡

**åŠŸèƒ½æè¿°**ï¼š
- è‡ªåŠ¨ç”Ÿæˆåˆçº¦ä»£ç 
- è‡ªåŠ¨ç¼–è¯‘åˆçº¦
- è‡ªåŠ¨éƒ¨ç½²åˆ°é“¾ä¸Š
- è‡ªåŠ¨éªŒè¯åˆçº¦

**ä¼˜å…ˆçº§**ï¼šP0ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰

#### 3.3.2 å…ƒæ•°æ®å­˜å‚¨æœåŠ¡

**åŠŸèƒ½æè¿°**ï¼š
- IPFS é›†æˆ
- Arweave é›†æˆ
- è‡ªåŠ¨ä¸Šä¼  NFT æ–‡ä»¶å’Œå…ƒæ•°æ®

**ä¼˜å…ˆçº§**ï¼šP0ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰

### 3.4 Marketplace èµ„äº§æ‰©å¼ è·¯çº¿å›¾ï¼ˆæ–°å¢ï¼‰

ä¸ºè¾¾æˆâ€œæ— å•†æˆ·å…¥é©»ä¹Ÿèƒ½å¿«é€Ÿä¸°å¯Œ Marketplaceâ€çš„ç›®æ ‡ï¼ŒæŠ€æœ¯ä¾§æŒ‰ç…§ä¸‰é˜¶æ®µè½åœ°ï¼š

1. **Stage 1ï¼šæé€Ÿèšåˆï¼ˆ0-1 å‘¨ï¼‰**
   - **æ•°æ®æ¥å…¥**ï¼šç¼–å†™ç»Ÿä¸€çš„ `AssetIngestorService`ï¼Œå¯¹æ¥ token-listã€DEX Aggregatorï¼ˆJupiter/Raydiumã€Uniswap/1inchã€OpenOcean/LI.FIï¼‰ã€NFT å¹³å°ï¼ˆMagic Edenã€OpenSeaã€Tensorï¼‰ã€RWA åè®®ï¼ˆUSYC/ONDO/MANTRA/Maple/Credixï¼‰ã€Launchpadï¼ˆPump.funã€Raydiumã€TON Presaleï¼‰ã€‚
   - **é€‚é…å±‚**ï¼šå®ç° `AssetNormalizer`ï¼Œå°† token/äº¤æ˜“å¯¹/NFT/RWA/Launchpad è½¬æ¢ä¸ºç»Ÿä¸€çš„ `MarketplaceAsset` æ¨¡å‹ï¼Œå†™å…¥ `marketplace_assets` è¡¨ã€‚
   - **ä¸‹å•æ¥å£**ï¼šå°è£… `SwapService`ã€`DexOrderService`ã€`NFTTradingService`ã€`RWAService`ã€`LaunchpadService`ï¼Œä¾› Agent/å‰ç«¯è°ƒç”¨ã€‚
   - **éªŒæ”¶**ï¼š24 å°æ—¶å†…å¯¼å…¥ â‰¥ 5000 æ¡èµ„äº§ï¼Œæ”¯æŒåŸºç¡€ä¸‹å•ã€‚

2. **Stage 2ï¼šåŠè‡ªåŠ¨å•†æˆ·å…¥é©»ï¼ˆ1-2 å‘¨ï¼‰**
   - **å¼€æ”¾å…¥å£**ï¼šæ–°å¢ `merchant-assets` API + æ§åˆ¶å°è¡¨å•ï¼Œå…è®¸é¡¹ç›®æ–¹ä¸Šä¼  Logoã€ç®€ä»‹ã€äº¤æ˜“å…¥å£ã€è¿”ä½£ï¼ˆ3-10%ï¼‰ã€‚
   - **Referral SDK**ï¼šæä¾› JS/TS SDKï¼Œé¡¹ç›®æ–¹å¯å°† PayMind Link åµŒå…¥ç™½çš®ä¹¦/æ¨æ–‡ï¼Œå¸¦ä¸Š referralIdã€‚
   - **Agent è‡ªåŠ©ä¸Šæ¶**ï¼šå…è®¸ Agent è°ƒç”¨ `agentAssets.submit()` æ¥å£æäº¤èµ„äº§ï¼Œå®¡æ ¸é€šè¿‡åè‡ªåŠ¨ä¸Šæ¶ï¼Œå¹¶ç»‘å®šâ€œä¸Šæ¶è€…åˆ†æˆâ€ã€‚
   - **å¼€å‘è€…å…±å»º**ï¼šæä¾› `assetProvider` SDK æ¨¡å—ï¼Œç¬¬ä¸‰æ–¹å¯ç¼–å†™çˆ¬è™«/é›†æˆï¼Œæäº¤èµ„äº§å¹¶è·å¾—ä¸Šæ¶å¥–åŠ±ã€‚

3. **Stage 3ï¼šAI è‡ªåŠ¨æ‰©å¼ ï¼ˆ1-2 æœˆï¼‰**
   - **AI æ‰«æå™¨**ï¼šè®­ç»ƒ/éƒ¨ç½² `AssetScanner`ï¼ˆåŸºäºé“¾ä¸Š/ç¤¾äº¤æ•°æ®ï¼‰è‡ªåŠ¨å‘ç°çƒ­é—¨èµ„äº§ã€‚
   - **é£é™©ä¸æè¿°ç”Ÿæˆ**ï¼šä½¿ç”¨ LLM + è§„åˆ™ç”Ÿæˆèµ„äº§ç®€ä»‹ã€é£é™©ç­‰çº§ã€ç­–ç•¥å»ºè®®ã€‚
   - **è‡ªåŠ¨å†³ç­–**ï¼š`AssetGovernor` æ ¹æ®æŒ‡æ ‡å†³å®šä¸Š/ä¸‹æ¶åŠæ’åºï¼Œè¾“å‡ºæ—¥æŠ¥ã€‚

**ä¾èµ–**ï¼šæ–°å¢ `marketplace_assets`ã€`asset_sources`ã€`asset_referrals` è¡¨åŠç›¸åº”æœåŠ¡ã€‚

---

## 4. å‰ç«¯å¼€å‘å†…å®¹

### 4.1 Agent æ„å›¾è¯†åˆ«å¢å¼º

#### 4.1.1 ä¿®æ”¹æ–‡ä»¶

**æ–‡ä»¶**ï¼š`paymindfrontend/components/agent/AgentChatEnhanced.tsx`

**ä¿®æ”¹å†…å®¹**ï¼š
- æ·»åŠ ä»£å¸å‘è¡Œæ„å›¾è¯†åˆ«
- æ·»åŠ  NFT å‘è¡Œæ„å›¾è¯†åˆ«
- æ·»åŠ  Launchpad æ„å›¾è¯†åˆ«
- æ·»åŠ ç›´æ¥äº¤æ˜“æ„å›¾è¯†åˆ«

**ä»£ç ç¤ºä¾‹**ï¼š
```typescript
// æ„å›¾è¯†åˆ«æ‰©å±•
const intents = {
  // ç°æœ‰æ„å›¾
  'search_products': ['æœç´¢', 'æ‰¾', 'ä¹°'],
  'add_to_cart': ['åŠ å…¥è´­ç‰©è½¦', 'æ·»åŠ åˆ°è´­ç‰©è½¦'],
  
  // æ–°å¢æ„å›¾
  'launch_token': ['å‘è¡Œä»£å¸', 'åˆ›å»ºä»£å¸', 'launch token', 'å‘è¡Œtoken'],
  'launch_nft': ['å‘è¡ŒNFT', 'åˆ›å»ºNFT', 'mint nft', 'å‘è¡Œnft'],
  'set_presale': ['è®¾ç½®é¢„å”®', 'presale', 'é¢„å”®'],
  'buy_token': ['è´­ä¹°ä»£å¸', 'buy token', 'ä¹°ä»£å¸'],
  'buy_nft': ['è´­ä¹°NFT', 'buy nft', 'ä¹°nft'],
}

// å¤„ç†æ–°å¢æ„å›¾
async function processMessage(message: string) {
  const intent = extractIntent(message)
  
  if (intent === 'launch_token') {
    // å¼•å¯¼ç”¨æˆ·è¾“å…¥ä»£å¸ä¿¡æ¯
    return await handleTokenLaunch(message)
  }
  
  if (intent === 'launch_nft') {
    // å¼•å¯¼ç”¨æˆ·è¾“å…¥NFTä¿¡æ¯
    return await handleNFTLaunch(message)
  }
  
  // ... å…¶ä»–æ„å›¾å¤„ç†
}
```

**å·¥ä½œé‡**ï¼š2 å¤©

### 4.2 æ–‡ä»¶ä¸Šä¼ æ”¯æŒ

#### 4.2.1 æ–°å¢æ–‡ä»¶

**æ–‡ä»¶**ï¼š`paymindfrontend/components/agent/FileUpload.tsx`

**åŠŸèƒ½**ï¼š
- æ”¯æŒå›¾ç‰‡ä¸Šä¼ 
- æ”¯æŒè§†é¢‘ä¸Šä¼ 
- æ”¯æŒéŸ³é¢‘ä¸Šä¼ 
- æ˜¾ç¤ºä¸Šä¼ è¿›åº¦
- é¢„è§ˆä¸Šä¼ çš„æ–‡ä»¶

**ä»£ç ç¤ºä¾‹**ï¼š
```typescript
interface FileUploadProps {
  onUpload: (file: File) => Promise<string>  // è¿”å›æ–‡ä»¶URL
  accept?: string  // æ–‡ä»¶ç±»å‹
  maxSize?: number  // æœ€å¤§æ–‡ä»¶å¤§å°ï¼ˆMBï¼‰
}

export const FileUpload: React.FC<FileUploadProps> = ({
  onUpload,
  accept = 'image/*,video/*,audio/*',
  maxSize = 100
}) => {
  const [uploading, setUploading] = useState(false)
  const [progress, setProgress] = useState(0)
  const [preview, setPreview] = useState<string | null>(null)
  
  const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0]
    if (!file) return
    
    // æ£€æŸ¥æ–‡ä»¶å¤§å°
    if (file.size > maxSize * 1024 * 1024) {
      alert(`æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡ ${maxSize}MB`)
      return
    }
    
    // é¢„è§ˆ
    const reader = new FileReader()
    reader.onload = (e) => {
      setPreview(e.target?.result as string)
    }
    reader.readAsDataURL(file)
    
    // ä¸Šä¼ 
    setUploading(true)
    try {
      const url = await onUpload(file)
      // ä¸Šä¼ æˆåŠŸ
    } catch (error) {
      // ä¸Šä¼ å¤±è´¥
    } finally {
      setUploading(false)
    }
  }
  
  return (
    <div>
      <input type="file" onChange={handleFileChange} accept={accept} />
      {preview && <img src={preview} alt="Preview" />}
      {uploading && <ProgressBar value={progress} />}
    </div>
  )
}
```

**å·¥ä½œé‡**ï¼š3 å¤©

### 4.3 Agent å¯¹è¯å¼•å¯¼å¢å¼º

#### 4.3.1 ä¿®æ”¹æ–‡ä»¶

**æ–‡ä»¶**ï¼š`paymindfrontend/components/agent/AgentChatEnhanced.tsx`

**ä¿®æ”¹å†…å®¹**ï¼š
- æ·»åŠ ä»£å¸å‘è¡Œå¼•å¯¼æµç¨‹
- æ·»åŠ  NFT å‘è¡Œå¼•å¯¼æµç¨‹
- æ·»åŠ  Launchpad å¼•å¯¼æµç¨‹
- æ·»åŠ ç›´æ¥äº¤æ˜“å¼•å¯¼æµç¨‹

**ä»£ç ç¤ºä¾‹**ï¼š
```typescript
// ä»£å¸å‘è¡Œå¼•å¯¼
async function handleTokenLaunch(message: string) {
  const session = getCurrentSession()
  const state = session.state || {}
  
  // æ”¶é›†ä»£å¸ä¿¡æ¯
  if (!state.tokenName) {
    return "å¥½çš„ï¼Œæˆ‘æ¥å¸®æ‚¨å‘è¡Œä»£å¸ã€‚è¯·å‘Šè¯‰æˆ‘ä»£å¸åç§°ï¼š"
  }
  
  if (!state.tokenSymbol) {
    const name = extractTokenName(message)
    state.tokenName = name
    return "å¥½çš„ï¼Œä»£å¸åç§°æ˜¯ " + name + "ã€‚è¯·å‘Šè¯‰æˆ‘ä»£å¸ç¬¦å·ï¼ˆä¾‹å¦‚ï¼šMTKï¼‰ï¼š"
  }
  
  if (!state.totalSupply) {
    const symbol = extractTokenSymbol(message)
    state.symbol = symbol
    return "å¥½çš„ï¼Œä»£å¸ç¬¦å·æ˜¯ " + symbol + "ã€‚è¯·å‘Šè¯‰æˆ‘æ€»ä¾›åº”é‡ï¼š"
  }
  
  // ... ç»§ç»­æ”¶é›†å…¶ä»–ä¿¡æ¯
  
  // ä¿¡æ¯æ”¶é›†å®Œæˆï¼Œè°ƒç”¨åç«¯API
  if (state.readyToLaunch) {
    const result = await tokenApi.launch({
      name: state.tokenName,
      symbol: state.tokenSymbol,
      totalSupply: state.totalSupply,
      chain: state.chain || 'ethereum',
      // ... å…¶ä»–å‚æ•°
    })
    
    return `ä»£å¸åˆ›å»ºæˆåŠŸï¼\n- åˆçº¦åœ°å€ï¼š${result.contractAddress}\n- äº¤æ˜“å“ˆå¸Œï¼š${result.transactionHash}\nå·²è‡ªåŠ¨ä¸Šæ¶åˆ° Marketplaceï¼ŒAgent å¯ä»¥ç«‹å³æ¨èå’Œäº¤æ˜“ã€‚`
  }
}
```

**å·¥ä½œé‡**ï¼š5 å¤©

### 4.4 ç»“æ„åŒ–æ¶ˆæ¯å¡ç‰‡æ‰©å±•

#### 4.4.1 ä¿®æ”¹æ–‡ä»¶

**æ–‡ä»¶**ï¼š`paymindfrontend/components/agent/StructuredMessageCard.tsx`

**ä¿®æ”¹å†…å®¹**ï¼š
- æ·»åŠ ä»£å¸ä¿¡æ¯å¡ç‰‡
- æ·»åŠ  NFT ä¿¡æ¯å¡ç‰‡
- æ·»åŠ é¢„å”®ä¿¡æ¯å¡ç‰‡
- æ·»åŠ äº¤æ˜“ç¡®è®¤å¡ç‰‡

**ä»£ç ç¤ºä¾‹**ï¼š
```typescript
// ä»£å¸ä¿¡æ¯å¡ç‰‡
export const TokenCard: React.FC<{ token: Token }> = ({ token }) => {
  return (
    <div className="token-card">
      <h3>{token.name} ({token.symbol})</h3>
      <p>åˆçº¦åœ°å€ï¼š{token.contractAddress}</p>
      <p>æ€»ä¾›åº”é‡ï¼š{token.totalSupply}</p>
      <p>å½“å‰ä»·æ ¼ï¼š{token.price} USDC</p>
      <p>å¯ç”¨æ•°é‡ï¼š{token.available}</p>
      <button onClick={() => handleBuyToken(token)}>è´­ä¹°ä»£å¸</button>
    </div>
  )
}

// NFT ä¿¡æ¯å¡ç‰‡
export const NFTCard: React.FC<{ nft: NFT }> = ({ nft }) => {
  return (
    <div className="nft-card">
      <img src={nft.image} alt={nft.name} />
      <h3>{nft.name}</h3>
      <p>é›†åˆï¼š{nft.collectionName}</p>
      <p>åˆ›ä½œè€…ï¼š{nft.creator}</p>
      <p>ç‰ˆç¨ï¼š{nft.royalty}%</p>
      <p>ä»·æ ¼ï¼š{nft.price} USDC</p>
      <button onClick={() => handleBuyNFT(nft)}>è´­ä¹°NFT</button>
    </div>
  )
}
```

**å·¥ä½œé‡**ï¼š3 å¤©

### 4.5 API å®¢æˆ·ç«¯æ‰©å±•

#### 4.5.1 æ–°å¢æ–‡ä»¶

**æ–‡ä»¶**ï¼š`paymindfrontend/lib/api/token.api.ts`

**åŠŸèƒ½**ï¼š
- ä»£å¸å‘è¡Œ API
- ä»£å¸çŠ¶æ€æŸ¥è¯¢ API
- ä»£å¸è´­ä¹° API

**ä»£ç ç¤ºä¾‹**ï¼š
```typescript
import { apiClient } from './client'

export interface TokenLaunchRequest {
  name: string
  symbol: string
  totalSupply: string
  decimals: number
  chain: 'ethereum' | 'solana' | 'bsc' | 'polygon' | 'base'
  distribution?: {
    team: number
    investors: number
    public: number
    reserve: number
  }
  presale?: {
    price: number
    amount: number
    startDate: string
    endDate: string
    whitelist?: string[]
  }
}

export interface TokenLaunchResponse {
  tokenId: string
  contractAddress: string
  transactionHash: string
  productId: string
  status: 'deploying' | 'deployed' | 'failed'
}

export const tokenApi = {
  // å‘è¡Œä»£å¸
  launch: async (data: TokenLaunchRequest): Promise<TokenLaunchResponse> => {
    return apiClient.post('/tokens/launch', data)
  },
  
  // æŸ¥è¯¢ä»£å¸çŠ¶æ€
  getStatus: async (tokenId: string) => {
    return apiClient.get(`/tokens/${tokenId}/status`)
  },
  
  // è´­ä¹°ä»£å¸
  buy: async (tokenId: string, amount: number, paymentMethod: string) => {
    return apiClient.post(`/tokens/${tokenId}/buy`, {
      amount,
      paymentMethod
    })
  }
}
```

**å·¥ä½œé‡**ï¼š2 å¤©

#### 4.5.2 æ–°å¢æ–‡ä»¶

**æ–‡ä»¶**ï¼š`paymindfrontend/lib/api/nft.api.ts`

**åŠŸèƒ½**ï¼š
- NFT é›†åˆåˆ›å»º API
- NFT Mint API
- NFT è´­ä¹° API

**ä»£ç ç¤ºä¾‹**ï¼š
```typescript
export interface NFTCollectionRequest {
  name: string
  description?: string
  chain: 'ethereum' | 'solana' | 'bsc' | 'polygon' | 'base'
  standard: 'ERC-721' | 'ERC-1155' | 'SPL-NFT'
  royalty: number
  image?: string
}

export interface NFTMintRequest {
  collectionId: string
  items: Array<{
    name: string
    description?: string
    image: string | File
    attributes?: Array<{
      trait_type: string
      value: string | number
    }>
    price?: number
  }>
  uploadTo: 'ipfs' | 'arweave'
  autoList?: boolean
}

export const nftApi = {
  // åˆ›å»ºNFTé›†åˆ
  createCollection: async (data: NFTCollectionRequest) => {
    return apiClient.post('/nfts/collections', data)
  },
  
  // æ‰¹é‡Mint NFT
  mint: async (collectionId: string, data: NFTMintRequest) => {
    const formData = new FormData()
    // å¤„ç†æ–‡ä»¶ä¸Šä¼ 
    return apiClient.post(`/nfts/collections/${collectionId}/mint`, formData, {
      headers: { 'Content-Type': 'multipart/form-data' }
    })
  },
  
  // è´­ä¹°NFT
  buy: async (nftId: string, paymentMethod: string) => {
    return apiClient.post(`/nfts/${nftId}/buy`, { paymentMethod })
  }
}
```

**å·¥ä½œé‡**ï¼š2 å¤©

### 4.6 Marketplace èµ„äº§èšåˆ UIï¼ˆæ–°å¢ï¼‰

**ç›®æ ‡**ï¼šå±•ç¤ºèšåˆèµ„äº§ã€æ”¯æŒå³æ—¶äº¤æ˜“/æäº¤èµ„äº§/AI æ¨èã€‚**

| å­ä»»åŠ¡ | æ–‡ä»¶ | åŠŸèƒ½ç‚¹ | å·¥ä½œé‡ | ä¼˜å…ˆçº§ |
|--------|------|--------|--------|--------|
| Stage1 èµ„äº§åˆ—è¡¨ | `components/marketplace/AssetDiscovery.tsx` (æ–°å»º) | å±•ç¤º token/äº¤æ˜“å¯¹/NFT/RWA/Launchpadï¼Œå«æ¥æºæ ‡ç­¾ã€æµåŠ¨æ€§ã€ä»·æ ¼ã€æ³¢åŠ¨ | 4 å¤© | P0 |
| ç­›é€‰ä¸æ“ä½œé¢æ¿ | `components/marketplace/AssetFilters.tsx`ã€`AssetActionPanel.tsx` (æ–°å»º) | å¤šç»´ç­›é€‰ã€å‘èµ· swap/é™ä»·/æ‰«åœ°/æŠ¢è´­ã€æ˜¾ç¤º AI æ¨èç­–ç•¥ | 3 å¤© | P0 |
| æäº¤èµ„äº§å…¥å£ | `components/marketplace/AssetSubmissionModal.tsx` (æ–°å»º) | é¡¹ç›®æ–¹/Agent/å¼€å‘è€…ä¸Šä¼ èµ„äº§ã€é…ç½®è¿”ä½£ã€æŸ¥çœ‹çŠ¶æ€ | 2 å¤© | P1 |
| AI æ¨èå¡ç‰‡ | `components/marketplace/AssetInsights.tsx` (æ–°å»º) | å±•ç¤º AI ç”Ÿæˆçš„æè¿°ã€é£é™©è¯„çº§ã€ç­–ç•¥å»ºè®® | 3 å¤© | P2 |
| é¦–é¡µå®£ä¼ æ®µè½ | `pages/index.tsx` | åœ¨ Hero/Marketplace åŒºå—å¼ºè°ƒâ€œAI èšåˆèµ„äº§â€ | 1 å¤© | P0 |

**ä¾èµ–**ï¼š`marketplace_assets` APIã€èµ„äº§æäº¤æµç¨‹ã€AI Insights APIã€‚

### 4.7 å‰ç«¯å¼€å‘æ€»ç»“

| ä»»åŠ¡ | æ–‡ä»¶ | å·¥ä½œé‡ | ä¼˜å…ˆçº§ |
|------|------|--------|--------|
| Agent æ„å›¾è¯†åˆ«å¢å¼º | `AgentChatEnhanced.tsx` | 2 å¤© | P0 |
| æ–‡ä»¶ä¸Šä¼ æ”¯æŒ | `FileUpload.tsx` (æ–°å»º) | 3 å¤© | P0 |
| Agent å¯¹è¯å¼•å¯¼å¢å¼º | `AgentChatEnhanced.tsx` | 5 å¤© | P0 |
| ç»“æ„åŒ–æ¶ˆæ¯å¡ç‰‡æ‰©å±• | `StructuredMessageCard.tsx` | 3 å¤© | P0 |
| ä»£å¸ API å®¢æˆ·ç«¯ | `token.api.ts` (æ–°å»º) | 2 å¤© | P0 |
| NFT API å®¢æˆ·ç«¯ | `nft.api.ts` (æ–°å»º) | 2 å¤© | P0 |

**æ€»å·¥ä½œé‡**ï¼š30 å¤©ï¼ˆå¯ä¸åç«¯å¹¶è¡Œï¼ŒæŒ‰é˜¶æ®µäº¤ä»˜ï¼‰

---

## 5. åç«¯å¼€å‘å†…å®¹

### 5.1 ä»£å¸å‘è¡ŒæœåŠ¡

#### 5.1.1 æ–°å¢æ–‡ä»¶

**æ–‡ä»¶**ï¼š`backend/src/modules/token/token.service.ts`

**åŠŸèƒ½**ï¼š
- ä»£å¸åˆ›å»º
- æ™ºèƒ½åˆçº¦éƒ¨ç½²
- ä»£å¸çŠ¶æ€æŸ¥è¯¢
- è‡ªåŠ¨åˆ›å»ºå•†å“ SKU

**ä»£ç ç¤ºä¾‹**ï¼š
```typescript
import { Injectable } from '@nestjs/common'
import { InjectRepository } from '@nestjs/typeorm'
import { Repository } from 'typeorm'
import { ContractDeploymentService } from '../contract/contract-deployment.service'
import { ProductService } from '../product/product.service'
import { Token } from '../../entities/token.entity'

@Injectable()
export class TokenService {
  constructor(
    @InjectRepository(Token)
    private tokenRepository: Repository<Token>,
    private contractDeploymentService: ContractDeploymentService,
    private productService: ProductService,
  ) {}

  async launchToken(data: TokenLaunchDto): Promise<TokenLaunchResult> {
    // 1. åˆ›å»ºä»£å¸è®°å½•
    const token = this.tokenRepository.create({
      name: data.name,
      symbol: data.symbol,
      totalSupply: data.totalSupply,
      decimals: data.decimals,
      chain: data.chain,
      status: 'deploying',
      projectId: data.projectId,
    })
    await this.tokenRepository.save(token)

    // 2. éƒ¨ç½²æ™ºèƒ½åˆçº¦
    const deployment = await this.contractDeploymentService.deployTokenContract({
      name: data.name,
      symbol: data.symbol,
      totalSupply: data.totalSupply,
      decimals: data.decimals,
      chain: data.chain,
    })

    // 3. æ›´æ–°ä»£å¸è®°å½•
    token.contractAddress = deployment.contractAddress
    token.transactionHash = deployment.transactionHash
    token.status = 'deployed'
    await this.tokenRepository.save(token)

    // 4. è‡ªåŠ¨åˆ›å»ºå•†å“ SKU
    const product = await this.productService.createFromToken(token)

    return {
      tokenId: token.id,
      contractAddress: deployment.contractAddress,
      transactionHash: deployment.transactionHash,
      productId: product.id,
      status: 'deployed',
    }
  }

  async getTokenStatus(tokenId: string): Promise<TokenStatus> {
    const token = await this.tokenRepository.findOne({ where: { id: tokenId } })
    if (!token) throw new NotFoundException('Token not found')

    return {
      status: token.status,
      contractAddress: token.contractAddress,
      transactionHash: token.transactionHash,
      deployedAt: token.deployedAt,
      stats: {
        totalSupply: token.totalSupply,
        sold: token.sold || '0',
        remaining: (BigInt(token.totalSupply) - BigInt(token.sold || '0')).toString(),
        totalRaised: token.totalRaised || '0',
      },
    }
  }

  async buyToken(tokenId: string, amount: number, buyerAddress: string): Promise<TransactionResult> {
    const token = await this.tokenRepository.findOne({ where: { id: tokenId } })
    if (!token) throw new NotFoundException('Token not found')

    // è°ƒç”¨é”€å”®åˆçº¦æ‰§è¡Œäº¤æ˜“
    const result = await this.contractDeploymentService.executeTokenSale({
      contractAddress: token.contractAddress,
      amount,
      buyerAddress,
      chain: token.chain,
    })

    // æ›´æ–°ä»£å¸è®°å½•
    token.sold = (BigInt(token.sold || '0') + BigInt(amount)).toString()
    await this.tokenRepository.save(token)

    return result
  }
}
```

**å·¥ä½œé‡**ï¼š5 å¤©

#### 5.1.2 æ–°å¢æ–‡ä»¶

**æ–‡ä»¶**ï¼š`backend/src/modules/token/token.controller.ts`

**åŠŸèƒ½**ï¼š
- ä»£å¸å‘è¡Œ API ç«¯ç‚¹
- ä»£å¸çŠ¶æ€æŸ¥è¯¢ API ç«¯ç‚¹
- ä»£å¸è´­ä¹° API ç«¯ç‚¹

**ä»£ç ç¤ºä¾‹**ï¼š
```typescript
import { Controller, Post, Get, Body, Param } from '@nestjs/common'
import { TokenService } from './token.service'
import { Public } from '../auth/decorators/public.decorator'

@Controller('tokens')
export class TokenController {
  constructor(private tokenService: TokenService) {}

  @Post('launch')
  async launchToken(@Body() data: TokenLaunchDto) {
    return this.tokenService.launchToken(data)
  }

  @Get(':id/status')
  async getTokenStatus(@Param('id') id: string) {
    return this.tokenService.getTokenStatus(id)
  }

  @Post(':id/buy')
  async buyToken(
    @Param('id') id: string,
    @Body() data: { amount: number; paymentMethod: string; walletAddress?: string },
  ) {
    return this.tokenService.buyToken(id, data.amount, data.walletAddress)
  }
}
```

**å·¥ä½œé‡**ï¼š1 å¤©

#### 5.1.3 æ–°å¢æ–‡ä»¶

**æ–‡ä»¶**ï¼š`backend/src/entities/token.entity.ts`

**åŠŸèƒ½**ï¼š
- ä»£å¸å®ä½“å®šä¹‰

**ä»£ç ç¤ºä¾‹**ï¼š
```typescript
import { Entity, Column, PrimaryGeneratedColumn, CreateDateColumn, UpdateDateColumn } from 'typeorm'

export enum TokenStatus {
  DEPLOYING = 'deploying',
  DEPLOYED = 'deployed',
  FAILED = 'failed',
}

@Entity('tokens')
export class Token {
  @PrimaryGeneratedColumn('uuid')
  id: string

  @Column()
  name: string

  @Column()
  symbol: string

  @Column('decimal', { precision: 36, scale: 18 })
  totalSupply: string

  @Column()
  decimals: number

  @Column()
  chain: string

  @Column({ nullable: true })
  contractAddress: string

  @Column({ nullable: true })
  transactionHash: string

  @Column({ type: 'enum', enum: TokenStatus, default: TokenStatus.DEPLOYING })
  status: TokenStatus

  @Column('decimal', { precision: 36, scale: 18, default: '0' })
  sold: string

  @Column('decimal', { precision: 36, scale: 18, default: '0' })
  totalRaised: string

  @Column({ nullable: true })
  projectId: string

  @CreateDateColumn()
  createdAt: Date

  @UpdateDateColumn()
  updatedAt: Date

  @Column({ nullable: true })
  deployedAt: Date
}
```

**å·¥ä½œé‡**ï¼š1 å¤©

### 5.2 NFT å‘è¡ŒæœåŠ¡

#### 5.2.1 æ–°å¢æ–‡ä»¶

**æ–‡ä»¶**ï¼š`backend/src/modules/nft/nft.service.ts`

**åŠŸèƒ½**ï¼š
- NFT é›†åˆåˆ›å»º
- NFT æ‰¹é‡ Mint
- NFT çŠ¶æ€æŸ¥è¯¢
- è‡ªåŠ¨åˆ›å»ºå•†å“ SKU

**ä»£ç ç¤ºä¾‹**ï¼š
```typescript
import { Injectable } from '@nestjs/common'
import { InjectRepository } from '@nestjs/typeorm'
import { Repository } from 'typeorm'
import { ContractDeploymentService } from '../contract/contract-deployment.service'
import { MetadataStorageService } from '../metadata/metadata-storage.service'
import { ProductService } from '../product/product.service'
import { NFTCollection, NFT } from '../../entities/nft.entity'

@Injectable()
export class NFTService {
  constructor(
    @InjectRepository(NFTCollection)
    private collectionRepository: Repository<NFTCollection>,
    @InjectRepository(NFT)
    private nftRepository: Repository<NFT>,
    private contractDeploymentService: ContractDeploymentService,
    private metadataStorageService: MetadataStorageService,
    private productService: ProductService,
  ) {}

  async createCollection(data: NFTCollectionDto): Promise<NFTCollectionResult> {
    // 1. åˆ›å»ºé›†åˆè®°å½•
    const collection = this.collectionRepository.create({
      name: data.name,
      description: data.description,
      chain: data.chain,
      standard: data.standard,
      royalty: data.royalty,
      status: 'deploying',
      creatorId: data.creatorId,
    })
    await this.collectionRepository.save(collection)

    // 2. éƒ¨ç½²æ™ºèƒ½åˆçº¦
    const deployment = await this.contractDeploymentService.deployNFTContract({
      name: data.name,
      symbol: data.name.replace(/\s+/g, ''),
      chain: data.chain,
      standard: data.standard,
      royalty: data.royalty,
      royaltyRecipient: data.creatorId,
    })

    // 3. æ›´æ–°é›†åˆè®°å½•
    collection.contractAddress = deployment.contractAddress
    collection.transactionHash = deployment.transactionHash
    collection.status = 'deployed'
    await this.collectionRepository.save(collection)

    return {
      collectionId: collection.id,
      contractAddress: deployment.contractAddress,
      transactionHash: deployment.transactionHash,
      status: 'deployed',
    }
  }

  async mintNFT(collectionId: string, items: NFTMintItem[]): Promise<MintResult> {
    const collection = await this.collectionRepository.findOne({ where: { id: collectionId } })
    if (!collection) throw new NotFoundException('Collection not found')

    const results: MintResultItem[] = []
    let minted = 0
    let failed = 0

    for (const item of items) {
      try {
        // 1. ä¸Šä¼ å…ƒæ•°æ®åˆ° IPFS/Arweave
        const metadataURI = await this.metadataStorageService.uploadMetadata({
          name: item.name,
          description: item.description,
          image: item.image,
          attributes: item.attributes,
        }, collection.uploadTo || 'ipfs')

        // 2. Mint NFT
        const mintResult = await this.contractDeploymentService.mintNFT({
          contractAddress: collection.contractAddress,
          to: collection.creatorId,
          tokenURI: metadataURI,
          chain: collection.chain,
        })

        // 3. åˆ›å»º NFT è®°å½•
        const nft = this.nftRepository.create({
          collectionId: collection.id,
          tokenId: mintResult.tokenId,
          name: item.name,
          description: item.description,
          image: item.image,
          metadataURI,
          price: item.price,
          status: 'minted',
          creatorId: collection.creatorId,
        })
        await this.nftRepository.save(nft)

        // 4. è‡ªåŠ¨åˆ›å»ºå•†å“ SKU
        const product = await this.productService.createFromNFT(nft)

        results.push({
          tokenId: mintResult.tokenId,
          productId: product.id,
          metadataURI,
          status: 'minted',
          transactionHash: mintResult.transactionHash,
        })

        minted++
      } catch (error) {
        results.push({
          tokenId: null,
          productId: null,
          metadataURI: null,
          status: 'failed',
          error: error.message,
        })
        failed++
      }
    }

    return {
      minted,
      failed,
      nfts: results,
    }
  }
}
```

**å·¥ä½œé‡**ï¼š6 å¤©

#### 5.2.2 æ–°å¢æ–‡ä»¶

**æ–‡ä»¶**ï¼š`backend/src/modules/nft/nft.controller.ts`

**åŠŸèƒ½**ï¼š
- NFT é›†åˆåˆ›å»º API ç«¯ç‚¹
- NFT Mint API ç«¯ç‚¹
- NFT è´­ä¹° API ç«¯ç‚¹

**ä»£ç ç¤ºä¾‹**ï¼š
```typescript
import { Controller, Post, Get, Body, Param, UseInterceptors, UploadedFiles } from '@nestjs/common'
import { FilesInterceptor } from '@nestjs/platform-express'
import { NFTService } from './nft.service'

@Controller('nfts')
export class NFTController {
  constructor(private nftService: NFTService) {}

  @Post('collections')
  async createCollection(@Body() data: NFTCollectionDto) {
    return this.nftService.createCollection(data)
  }

  @Post('collections/:id/mint')
  @UseInterceptors(FilesInterceptor('files'))
  async mintNFT(
    @Param('id') id: string,
    @Body() data: NFTMintDto,
    @UploadedFiles() files: Express.Multer.File[],
  ) {
    // å¤„ç†æ–‡ä»¶ä¸Šä¼ 
    return this.nftService.mintNFT(id, data.items, files)
  }

  @Get('collections/:id/mint-status')
  async getMintStatus(@Param('id') id: string) {
    return this.nftService.getMintStatus(id)
  }

  @Post(':id/buy')
  async buyNFT(
    @Param('id') id: string,
    @Body() data: { paymentMethod: string; walletAddress?: string },
  ) {
    return this.nftService.buyNFT(id, data.walletAddress)
  }
}
```

**å·¥ä½œé‡**ï¼š2 å¤©

#### 5.2.3 æ–°å¢æ–‡ä»¶

**æ–‡ä»¶**ï¼š`backend/src/entities/nft.entity.ts`

**åŠŸèƒ½**ï¼š
- NFT é›†åˆå®ä½“å®šä¹‰
- NFT å®ä½“å®šä¹‰

**ä»£ç ç¤ºä¾‹**ï¼š
```typescript
import { Entity, Column, PrimaryGeneratedColumn, CreateDateColumn, UpdateDateColumn, ManyToOne } from 'typeorm'

export enum NFTStatus {
  MINTING = 'minting',
  MINTED = 'minted',
  FAILED = 'failed',
}

@Entity('nft_collections')
export class NFTCollection {
  @PrimaryGeneratedColumn('uuid')
  id: string

  @Column()
  name: string

  @Column({ type: 'text', nullable: true })
  description: string

  @Column()
  chain: string

  @Column()
  standard: string  // ERC-721, ERC-1155, SPL-NFT

  @Column('decimal', { precision: 5, scale: 2 })
  royalty: number

  @Column({ nullable: true })
  contractAddress: string

  @Column({ nullable: true })
  transactionHash: string

  @Column({ type: 'enum', enum: NFTStatus, default: NFTStatus.MINTING })
  status: NFTStatus

  @Column()
  creatorId: string

  @Column({ default: 'ipfs' })
  uploadTo: string  // ipfs, arweave

  @CreateDateColumn()
  createdAt: Date

  @UpdateDateColumn()
  updatedAt: Date
}

@Entity('nfts')
export class NFT {
  @PrimaryGeneratedColumn('uuid')
  id: string

  @Column()
  collectionId: string

  @Column()
  tokenId: string

  @Column()
  name: string

  @Column({ type: 'text', nullable: true })
  description: string

  @Column()
  image: string

  @Column()
  metadataURI: string

  @Column('decimal', { precision: 36, scale: 18, nullable: true })
  price: string

  @Column({ type: 'enum', enum: NFTStatus, default: NFTStatus.MINTING })
  status: NFTStatus

  @Column()
  creatorId: string

  @Column({ nullable: true })
  ownerId: string

  @CreateDateColumn()
  createdAt: Date

  @UpdateDateColumn()
  updatedAt: Date

  @ManyToOne(() => NFTCollection, collection => collection.id)
  collection: NFTCollection
}
```

**å·¥ä½œé‡**ï¼š2 å¤©

### 5.3 æ™ºèƒ½åˆçº¦éƒ¨ç½²æœåŠ¡

#### 5.3.1 æ–°å¢æ–‡ä»¶

**æ–‡ä»¶**ï¼š`backend/src/modules/contract/contract-deployment.service.ts`

**åŠŸèƒ½**ï¼š
- ä»£å¸åˆçº¦éƒ¨ç½²
- NFT åˆçº¦éƒ¨ç½²
- é”€å”®åˆçº¦éƒ¨ç½²
- åˆçº¦éªŒè¯

**ä»£ç ç¤ºä¾‹**ï¼š
```typescript
import { Injectable } from '@nestjs/common'
import { ethers } from 'ethers'
import * as solanaWeb3 from '@solana/web3.js'

@Injectable()
export class ContractDeploymentService {
  // éƒ¨ç½² ERC-20 ä»£å¸åˆçº¦
  async deployTokenContract(config: TokenConfig): Promise<DeploymentResult> {
    if (config.chain === 'ethereum' || config.chain === 'bsc' || config.chain === 'polygon') {
      return this.deployERC20Token(config)
    } else if (config.chain === 'solana') {
      return this.deploySPLToken(config)
    }
  }

  private async deployERC20Token(config: TokenConfig): Promise<DeploymentResult> {
    // 1. ç”Ÿæˆåˆçº¦ä»£ç 
    const contractCode = this.generateERC20Contract(config)

    // 2. ç¼–è¯‘åˆçº¦
    const compiled = await this.compileContract(contractCode, 'solidity')

    // 3. éƒ¨ç½²åˆ°é“¾ä¸Š
    const provider = this.getProvider(config.chain)
    const wallet = new ethers.Wallet(process.env.DEPLOYER_PRIVATE_KEY, provider)
    const factory = new ethers.ContractFactory(
      compiled.abi,
      compiled.bytecode,
      wallet,
    )
    const contract = await factory.deploy(
      config.name,
      config.symbol,
      ethers.parseUnits(config.totalSupply, config.decimals),
    )
    await contract.waitForDeployment()

    // 4. éªŒè¯åˆçº¦
    await this.verifyContract(await contract.getAddress(), contractCode, config.chain)

    return {
      contractAddress: await contract.getAddress(),
      transactionHash: contract.deploymentTransaction()?.hash || '',
      status: 'deployed',
    }
  }

  private async deploySPLToken(config: TokenConfig): Promise<DeploymentResult> {
    // Solana SPL Token éƒ¨ç½²é€»è¾‘
    // ...
  }

  // éƒ¨ç½² NFT åˆçº¦
  async deployNFTContract(config: NFTConfig): Promise<DeploymentResult> {
    if (config.chain === 'ethereum' || config.chain === 'bsc' || config.chain === 'polygon') {
      return this.deployERC721NFT(config)
    } else if (config.chain === 'solana') {
      return this.deploySPLNFT(config)
    }
  }

  // Mint NFT
  async mintNFT(config: MintConfig): Promise<MintResult> {
    // è°ƒç”¨åˆçº¦ Mint æ–¹æ³•
    // ...
  }

  // æ‰§è¡Œä»£å¸é”€å”®
  async executeTokenSale(config: SaleConfig): Promise<TransactionResult> {
    // è°ƒç”¨é”€å”®åˆçº¦æ‰§è¡Œäº¤æ˜“
    // ...
  }
}
```

**å·¥ä½œé‡**ï¼š8 å¤©

### 5.4 å…ƒæ•°æ®å­˜å‚¨æœåŠ¡

#### 5.4.1 æ–°å¢æ–‡ä»¶

**æ–‡ä»¶**ï¼š`backend/src/modules/metadata/metadata-storage.service.ts`

**åŠŸèƒ½**ï¼š
- IPFS é›†æˆ
- Arweave é›†æˆ
- å…ƒæ•°æ®ä¸Šä¼ 

**ä»£ç ç¤ºä¾‹**ï¼š
```typescript
import { Injectable } from '@nestjs/common'
import { create } from 'ipfs-http-client'
import Arweave from 'arweave'

@Injectable()
export class MetadataStorageService {
  private ipfsClient
  private arweaveClient

  constructor() {
    // åˆå§‹åŒ– IPFS å®¢æˆ·ç«¯
    this.ipfsClient = create({
      host: process.env.IPFS_HOST || 'ipfs.infura.io',
      port: 5001,
      protocol: 'https',
      headers: {
        authorization: `Basic ${Buffer.from(
          `${process.env.IPFS_PROJECT_ID}:${process.env.IPFS_PROJECT_SECRET}`,
        ).toString('base64')}`,
      },
    })

    // åˆå§‹åŒ– Arweave å®¢æˆ·ç«¯
    this.arweaveClient = Arweave.init({
      host: 'arweave.net',
      port: 443,
      protocol: 'https',
    })
  }

  async uploadMetadata(metadata: any, storage: 'ipfs' | 'arweave'): Promise<string> {
    if (storage === 'ipfs') {
      return this.uploadToIPFS(metadata)
    } else {
      return this.uploadToArweave(metadata)
    }
  }

  private async uploadToIPFS(metadata: any): Promise<string> {
    const metadataString = JSON.stringify(metadata)
    const result = await this.ipfsClient.add(metadataString)
    return `ipfs://${result.path}`
  }

  private async uploadToArweave(metadata: any): Promise<string> {
    const metadataString = JSON.stringify(metadata)
    const transaction = await this.arweaveClient.createTransaction({
      data: metadataString,
    })
    await this.arweaveClient.transactions.sign(transaction)
    await this.arweaveClient.transactions.post(transaction)
    return `ar://${transaction.id}`
  }

  async uploadFile(file: Buffer, filename: string, storage: 'ipfs' | 'arweave'): Promise<string> {
    if (storage === 'ipfs') {
      const result = await this.ipfsClient.add(file)
      return `ipfs://${result.path}`
    } else {
      const transaction = await this.arweaveClient.createTransaction({
        data: file,
      })
      await this.arweaveClient.transactions.sign(transaction)
      await this.arweaveClient.transactions.post(transaction)
      return `ar://${transaction.id}`
    }
  }
}
```

**å·¥ä½œé‡**ï¼š4 å¤©

### 5.5 Launchpad æœåŠ¡

#### 5.5.1 æ–°å¢æ–‡ä»¶

**æ–‡ä»¶**ï¼š`backend/src/modules/launchpad/launchpad.service.ts`

**åŠŸèƒ½**ï¼š
- ä»£å¸é¢„å”®åˆ›å»º
- NFT é¢„å”®åˆ›å»º
- ç™½åå•ç®¡ç†
- è‡ªåŠ¨åˆ†å‘

**å·¥ä½œé‡**ï¼š5 å¤©

### 5.6 æ•°æ®åº“è¿ç§»

#### 5.6.1 æ–°å¢æ–‡ä»¶

**æ–‡ä»¶**ï¼š`backend/src/migrations/XXXXXX-AddTokenAndNFT.ts`

**åŠŸèƒ½**ï¼š
- åˆ›å»º tokens è¡¨
- åˆ›å»º nft_collections è¡¨
- åˆ›å»º nfts è¡¨
- åˆ›å»º presales è¡¨
- åˆ›å»º whitelists è¡¨

**å·¥ä½œé‡**ï¼š1 å¤©

### 5.7 èµ„äº§èšåˆæœåŠ¡ï¼ˆæ–°å¢ï¼‰

| å­ç³»ç»Ÿ | æ–‡ä»¶ | åŠŸèƒ½ç‚¹ | å·¥ä½œé‡ | ä¼˜å…ˆçº§ |
|--------|------|--------|--------|--------|
| AssetIngestorService | `backend/src/modules/marketplace/asset-ingestor.service.ts` (æ–°å»º) | è§£æ token-listã€DEXã€NFTã€RWAã€Launchpad æ•°æ®æºï¼Œç»Ÿä¸€å†™å…¥ `marketplace_assets` | 6 å¤© | P0 |
| AssetNormalizer & Scheduler | `backend/src/modules/marketplace/asset-normalizer.service.ts`ã€`asset-scheduler.ts` (æ–°å»º) | å®šæ—¶æ‹‰å–ã€å»é‡ã€å½’ä¸€åŒ–ã€æ›´æ–°ä»·æ ¼/æµåŠ¨æ€§æŒ‡æ ‡ | 4 å¤© | P0 |
| AssetTradingService | `backend/src/modules/marketplace/asset-trading.service.ts` (æ–°å»º) | å¯¹æ¥ swap/DEX/NFT/RWA APIï¼Œå°è£…å¸‚ä»·/é™ä»·/æ‰«åœ°/æŠ¢è´­æ“ä½œ | 5 å¤© | P0 |
| AssetSubmissionController | `backend/src/modules/marketplace/asset.controller.ts` (æ–°å»º) | é¡¹ç›®æ–¹/Agent/å¼€å‘è€…æäº¤èµ„äº§ã€é…ç½®è¿”ä½£ã€å®¡æ ¸æµç¨‹ | 4 å¤© | P1 |
| AssetReferralService | `backend/src/modules/marketplace/asset-referral.service.ts` (æ–°å»º) | è®°å½•ä¸Šæ¶è€…ã€è®¡ç®—è¿”ä½£ã€ä¸ 0.5% å•†æˆ·åˆ†æˆè”åŠ¨ | 3 å¤© | P1 |
| AssetInsightsService | `backend/src/modules/marketplace/asset-insights.service.ts` (æ–°å»º) | è°ƒç”¨ AI/æ•°æ®æºç”Ÿæˆæè¿°ã€é£é™©è¯„çº§ã€ç­–ç•¥å»ºè®® | 5 å¤© | P2 |
| æ•°æ®åº“è¿ç§» | `backend/src/migrations/XXXXXX-AddMarketplaceAssets.ts` (æ–°å»º) | `marketplace_assets`ã€`asset_sources`ã€`asset_referrals`ã€`asset_insights` è¡¨ç»“æ„ | 2 å¤© | P0 |

### 5.8 åç«¯å¼€å‘æ€»ç»“

| ä»»åŠ¡ | æ–‡ä»¶ | å·¥ä½œé‡ | ä¼˜å…ˆçº§ |
|------|------|--------|--------|
| ä»£å¸å‘è¡ŒæœåŠ¡ | `token.service.ts` (æ–°å»º) | 5 å¤© | P0 |
| ä»£å¸æ§åˆ¶å™¨ | `token.controller.ts` (æ–°å»º) | 1 å¤© | P0 |
| ä»£å¸å®ä½“ | `token.entity.ts` (æ–°å»º) | 1 å¤© | P0 |
| NFT å‘è¡ŒæœåŠ¡ | `nft.service.ts` (æ–°å»º) | 6 å¤© | P0 |
| NFT æ§åˆ¶å™¨ | `nft.controller.ts` (æ–°å»º) | 2 å¤© | P0 |
| NFT å®ä½“ | `nft.entity.ts` (æ–°å»º) | 2 å¤© | P0 |
| æ™ºèƒ½åˆçº¦éƒ¨ç½²æœåŠ¡ | `contract-deployment.service.ts` (æ–°å»º) | 8 å¤© | P0 |
| å…ƒæ•°æ®å­˜å‚¨æœåŠ¡ | `metadata-storage.service.ts` (æ–°å»º) | 4 å¤© | P0 |
| Launchpad æœåŠ¡ | `launchpad.service.ts` (æ–°å»º) | 5 å¤© | P1 |
| èµ„äº§èšåˆæœåŠ¡ | `asset-*.service.ts` (æ–°å»º) | 17 å¤© | P0/P1 |
| æ•°æ®åº“è¿ç§» | `AddTokenAndNFT.ts`ã€`AddMarketplaceAssets.ts` | 3 å¤© | P0 |

**æ€»å·¥ä½œé‡**ï¼š55 å¤©

---

## 6. æ™ºèƒ½åˆçº¦å¼€å‘å†…å®¹

### 6.1 ERC-20 ä»£å¸åˆçº¦

#### 6.1.1 æ–°å¢æ–‡ä»¶

**æ–‡ä»¶**ï¼š`contracts/contracts/ERC20Token.sol`

**åŠŸèƒ½**ï¼š
- æ ‡å‡† ERC-20 ä»£å¸å®ç°
- å¯é…ç½®çš„æ€»ä¾›åº”é‡
- å¯é…ç½®çš„ç²¾åº¦

**ä»£ç ç¤ºä¾‹**ï¼š
```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

import "@openzeppelin/contracts/token/ERC20/ERC20.sol";
import "@openzeppelin/contracts/access/Ownable.sol";

contract PayMindToken is ERC20, Ownable {
    uint256 public constant TOTAL_SUPPLY = 1000000 * 10**18;
    
    constructor(
        string memory name,
        string memory symbol,
        uint256 totalSupply
    ) ERC20(name, symbol) {
        _mint(msg.sender, totalSupply);
    }
    
    function mint(address to, uint256 amount) external onlyOwner {
        _mint(to, amount);
    }
}
```

**å·¥ä½œé‡**ï¼š2 å¤©

### 6.2 ERC-721 NFT åˆçº¦

#### 6.2.1 æ–°å¢æ–‡ä»¶

**æ–‡ä»¶**ï¼š`contracts/contracts/ERC721NFT.sol`

**åŠŸèƒ½**ï¼š
- æ ‡å‡† ERC-721 NFT å®ç°
- ç‰ˆç¨æ”¯æŒ
- Mint åŠŸèƒ½

**ä»£ç ç¤ºä¾‹**ï¼š
```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

import "@openzeppelin/contracts/token/ERC721/ERC721.sol";
import "@openzeppelin/contracts/access/Ownable.sol";
import "@openzeppelin/contracts/utils/Counters.sol";

contract PayMindNFT is ERC721, Ownable {
    using Counters for Counters.Counter;
    Counters.Counter private _tokenIds;
    
    uint256 public royaltyPercentage;  // åŸºç‚¹ï¼ˆå¦‚ 1000 = 10%ï¼‰
    address public royaltyRecipient;
    
    mapping(uint256 => string) private _tokenURIs;
    
    constructor(
        string memory name,
        string memory symbol,
        uint256 _royaltyPercentage,
        address _royaltyRecipient
    ) ERC721(name, symbol) {
        royaltyPercentage = _royaltyPercentage;
        royaltyRecipient = _royaltyRecipient;
    }
    
    function mint(address to, string memory tokenURI) external onlyOwner returns (uint256) {
        _tokenIds.increment();
        uint256 newTokenId = _tokenIds.current();
        _safeMint(to, newTokenId);
        _setTokenURI(newTokenId, tokenURI);
        return newTokenId;
    }
    
    function _setTokenURI(uint256 tokenId, string memory tokenURI) internal {
        _tokenURIs[tokenId] = tokenURI;
    }
    
    function tokenURI(uint256 tokenId) public view override returns (string memory) {
        return _tokenURIs[tokenId];
    }
}
```

**å·¥ä½œé‡**ï¼š2 å¤©

### 6.3 ä»£å¸é”€å”®åˆçº¦

#### 6.3.1 æ–°å¢æ–‡ä»¶

**æ–‡ä»¶**ï¼š`contracts/contracts/TokenSale.sol`

**åŠŸèƒ½**ï¼š
- ä»£å¸ç›´æ¥é”€å”®
- ä»·æ ¼ç®¡ç†
- ç™½åå•æ”¯æŒ

**ä»£ç ç¤ºä¾‹**ï¼š
```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

import "@openzeppelin/contracts/token/ERC20/IERC20.sol";
import "@openzeppelin/contracts/access/Ownable.sol";

contract TokenSale is Ownable {
    IERC20 public token;
    IERC20 public paymentToken;  // USDC/USDT
    address public seller;
    uint256 public price;         // ä»£å¸ä»·æ ¼
    uint256 public totalSupply;   // æ€»ä¾›åº”é‡
    uint256 public sold;           // å·²å”®æ•°é‡
    bool public isActive;
    
    mapping(address => bool) public whitelist;
    bool public hasWhitelist;
    
    event TokensPurchased(address buyer, uint256 amount, uint256 payment);
    
    constructor(
        address _token,
        address _paymentToken,
        address _seller,
        uint256 _price,
        uint256 _totalSupply
    ) {
        token = IERC20(_token);
        paymentToken = IERC20(_paymentToken);
        seller = _seller;
        price = _price;
        totalSupply = _totalSupply;
        isActive = true;
    }
    
    function buy(uint256 tokenAmount) external {
        require(isActive, "Sale not active");
        require(sold + tokenAmount <= totalSupply, "Insufficient supply");
        
        if (hasWhitelist) {
            require(whitelist[msg.sender], "Not whitelisted");
        }
        
        uint256 payment = tokenAmount * price / 10**18;
        paymentToken.transferFrom(msg.sender, seller, payment);
        token.transfer(msg.sender, tokenAmount);
        
        sold += tokenAmount;
        
        emit TokensPurchased(msg.sender, tokenAmount, payment);
    }
    
    function setPrice(uint256 newPrice) external onlyOwner {
        price = newPrice;
    }
    
    function setActive(bool active) external onlyOwner {
        isActive = active;
    }
    
    function addToWhitelist(address[] memory addresses) external onlyOwner {
        for (uint256 i = 0; i < addresses.length; i++) {
            whitelist[addresses[i]] = true;
        }
        hasWhitelist = true;
    }
}
```

**å·¥ä½œé‡**ï¼š2 å¤©

### 6.4 NFT é”€å”®åˆçº¦

#### 6.4.1 æ–°å¢æ–‡ä»¶

**æ–‡ä»¶**ï¼š`contracts/contracts/NFTSale.sol`

**åŠŸèƒ½**ï¼š
- NFT ç›´æ¥é”€å”®
- ç‰ˆç¨è‡ªåŠ¨åˆ†é…
- ä»·æ ¼ç®¡ç†

**ä»£ç ç¤ºä¾‹**ï¼š
```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

import "@openzeppelin/contracts/token/ERC721/IERC721.sol";
import "@openzeppelin/contracts/token/ERC20/IERC20.sol";

contract NFTSale {
    IERC721 public nft;
    IERC20 public paymentToken;  // USDC/USDT
    address public creator;
    uint256 public royalty;       // ç‰ˆç¨æ¯”ä¾‹ï¼ˆåŸºç‚¹ï¼Œå¦‚ 1000 = 10%ï¼‰
    
    mapping(uint256 => uint256) public prices;  // tokenId => price
    mapping(uint256 => bool) public listed;     // tokenId => isListed
    
    event NFTPurchased(uint256 tokenId, address buyer, uint256 price, uint256 royalty);
    
    constructor(
        address _nft,
        address _paymentToken,
        address _creator,
        uint256 _royalty
    ) {
        nft = IERC721(_nft);
        paymentToken = IERC20(_paymentToken);
        creator = _creator;
        royalty = _royalty;
    }
    
    function buy(uint256 tokenId) external {
        require(listed[tokenId], "Not listed");
        uint256 price = prices[tokenId];
        
        // è®¡ç®—ç‰ˆç¨
        uint256 royaltyAmount = price * royalty / 10000;
        uint256 sellerAmount = price - royaltyAmount;
        
        address seller = nft.ownerOf(tokenId);
        
        // æ”¯ä»˜
        paymentToken.transferFrom(msg.sender, creator, royaltyAmount);
        paymentToken.transferFrom(msg.sender, seller, sellerAmount);
        
        // è½¬ç§» NFT
        nft.transferFrom(seller, msg.sender, tokenId);
        
        listed[tokenId] = false;
        
        emit NFTPurchased(tokenId, msg.sender, price, royaltyAmount);
    }
    
    function list(uint256 tokenId, uint256 price) external {
        require(nft.ownerOf(tokenId) == msg.sender, "Not owner");
        prices[tokenId] = price;
        listed[tokenId] = true;
    }
    
    function delist(uint256 tokenId) external {
        require(nft.ownerOf(tokenId) == msg.sender, "Not owner");
        listed[tokenId] = false;
    }
}
```

**å·¥ä½œé‡**ï¼š2 å¤©

### 6.5 åˆçº¦æµ‹è¯•

#### 6.5.1 æ–°å¢æ–‡ä»¶

**æ–‡ä»¶**ï¼š`contracts/test/TokenSale.test.ts`

**åŠŸèƒ½**ï¼š
- ä»£å¸é”€å”®åˆçº¦æµ‹è¯•
- NFT é”€å”®åˆçº¦æµ‹è¯•

**å·¥ä½œé‡**ï¼š3 å¤©

### 6.6 æ™ºèƒ½åˆçº¦å¼€å‘æ€»ç»“

| ä»»åŠ¡ | æ–‡ä»¶ | å·¥ä½œé‡ | ä¼˜å…ˆçº§ |
|------|------|--------|--------|
| ERC-20 ä»£å¸åˆçº¦ | `ERC20Token.sol` (æ–°å»º) | 2 å¤© | P0 |
| ERC-721 NFT åˆçº¦ | `ERC721NFT.sol` (æ–°å»º) | 2 å¤© | P0 |
| ä»£å¸é”€å”®åˆçº¦ | `TokenSale.sol` (æ–°å»º) | 2 å¤© | P0 |
| NFT é”€å”®åˆçº¦ | `NFTSale.sol` (æ–°å»º) | 2 å¤© | P0 |
| åˆçº¦æµ‹è¯• | `TokenSale.test.ts` (æ–°å»º) | 3 å¤© | P0 |

**æ€»å·¥ä½œé‡**ï¼š11 å¤©

---

## 7. å¼€å‘è®¡åˆ’

### 7.1 Phase 1ï¼šæ ¸å¿ƒåŠŸèƒ½å¼€å‘ï¼ˆ0-6å‘¨ï¼‰

#### Week 1-2ï¼šåŸºç¡€è®¾æ–½æ­å»º
- âœ… æ•°æ®åº“è®¾è®¡å’Œè¿ç§»
- âœ… æ™ºèƒ½åˆçº¦å¼€å‘
- âœ… åˆçº¦éƒ¨ç½²æœåŠ¡æ¡†æ¶

#### Week 3-4ï¼šåç«¯æ ¸å¿ƒæœåŠ¡
- âœ… ä»£å¸å‘è¡ŒæœåŠ¡
- âœ… NFT å‘è¡ŒæœåŠ¡
- âœ… å…ƒæ•°æ®å­˜å‚¨æœåŠ¡

#### Week 5-6ï¼šå‰ç«¯é›†æˆ
- âœ… Agent æ„å›¾è¯†åˆ«å¢å¼º
- âœ… æ–‡ä»¶ä¸Šä¼ æ”¯æŒ
- âœ… Agent å¯¹è¯å¼•å¯¼

**é‡Œç¨‹ç¢‘**ï¼šä»£å¸å’Œ NFT å¯ä»¥é€šè¿‡ Agent å‘è¡Œ

### 7.2 Phase 2ï¼šç›´æ¥äº¤æ˜“åŠŸèƒ½ï¼ˆ6-10å‘¨ï¼‰

#### Week 7-8ï¼šé”€å”®åˆçº¦å’Œäº¤æ˜“æœåŠ¡
- âœ… ä»£å¸é”€å”®åˆçº¦
- âœ… NFT é”€å”®åˆçº¦
- âœ… äº¤æ˜“æœåŠ¡å®ç°

#### Week 9-10ï¼šå‰ç«¯äº¤æ˜“ç•Œé¢
- âœ… ä»£å¸è´­ä¹°ç•Œé¢
- âœ… NFT è´­ä¹°ç•Œé¢
- âœ… äº¤æ˜“ç¡®è®¤æµç¨‹

**é‡Œç¨‹ç¢‘**ï¼šä»£å¸å’Œ NFT å¯ä»¥ç›´æ¥äº¤æ˜“

### 7.3 Phase 3ï¼šLaunchpad åŠŸèƒ½ï¼ˆ10-12å‘¨ï¼‰

#### Week 11-12ï¼šLaunchpad æœåŠ¡
- âœ… é¢„å”®åŠŸèƒ½
- âœ… ç™½åå•ç®¡ç†
- âœ… è‡ªåŠ¨åˆ†å‘

**é‡Œç¨‹ç¢‘**ï¼šæ”¯æŒä»£å¸å’Œ NFT é¢„å”®

### 7.4 Phase 4ï¼šæµ‹è¯•å’Œä¼˜åŒ–ï¼ˆ12-14å‘¨ï¼‰

#### Week 13-14ï¼šæµ‹è¯•å’Œä¼˜åŒ–
- âœ… å•å…ƒæµ‹è¯•
- âœ… é›†æˆæµ‹è¯•
- âœ… æ€§èƒ½ä¼˜åŒ–
- âœ… Bug ä¿®å¤

**é‡Œç¨‹ç¢‘**ï¼šæ‰€æœ‰åŠŸèƒ½æµ‹è¯•é€šè¿‡ï¼Œå‡†å¤‡ä¸Šçº¿

---

## 8. äº¤ä»˜ç‰©æ¸…å•

### 8.1 å‰ç«¯äº¤ä»˜ç‰©

| äº¤ä»˜ç‰© | æ–‡ä»¶è·¯å¾„ | çŠ¶æ€ |
|--------|----------|------|
| Agent æ„å›¾è¯†åˆ«å¢å¼º | `paymindfrontend/components/agent/AgentChatEnhanced.tsx` | â³ |
| æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ | `paymindfrontend/components/agent/FileUpload.tsx` | â³ |
| ä»£å¸ä¿¡æ¯å¡ç‰‡ | `paymindfrontend/components/agent/StructuredMessageCard.tsx` | â³ |
| NFT ä¿¡æ¯å¡ç‰‡ | `paymindfrontend/components/agent/StructuredMessageCard.tsx` | â³ |
| ä»£å¸ API å®¢æˆ·ç«¯ | `paymindfrontend/lib/api/token.api.ts` | â³ |
| NFT API å®¢æˆ·ç«¯ | `paymindfrontend/lib/api/nft.api.ts` | â³ |

### 8.2 åç«¯äº¤ä»˜ç‰©

| äº¤ä»˜ç‰© | æ–‡ä»¶è·¯å¾„ | çŠ¶æ€ |
|--------|----------|------|
| ä»£å¸å‘è¡ŒæœåŠ¡ | `backend/src/modules/token/token.service.ts` | â³ |
| ä»£å¸æ§åˆ¶å™¨ | `backend/src/modules/token/token.controller.ts` | â³ |
| ä»£å¸å®ä½“ | `backend/src/entities/token.entity.ts` | â³ |
| NFT å‘è¡ŒæœåŠ¡ | `backend/src/modules/nft/nft.service.ts` | â³ |
| NFT æ§åˆ¶å™¨ | `backend/src/modules/nft/nft.controller.ts` | â³ |
| NFT å®ä½“ | `backend/src/entities/nft.entity.ts` | â³ |
| æ™ºèƒ½åˆçº¦éƒ¨ç½²æœåŠ¡ | `backend/src/modules/contract/contract-deployment.service.ts` | â³ |
| å…ƒæ•°æ®å­˜å‚¨æœåŠ¡ | `backend/src/modules/metadata/metadata-storage.service.ts` | â³ |
| Launchpad æœåŠ¡ | `backend/src/modules/launchpad/launchpad.service.ts` | â³ |
| æ•°æ®åº“è¿ç§» | `backend/src/migrations/XXXXXX-AddTokenAndNFT.ts` | â³ |

### 8.3 æ™ºèƒ½åˆçº¦äº¤ä»˜ç‰©

| äº¤ä»˜ç‰© | æ–‡ä»¶è·¯å¾„ | çŠ¶æ€ |
|--------|----------|------|
| ERC-20 ä»£å¸åˆçº¦ | `contracts/contracts/ERC20Token.sol` | â³ |
| ERC-721 NFT åˆçº¦ | `contracts/contracts/ERC721NFT.sol` | â³ |
| ä»£å¸é”€å”®åˆçº¦ | `contracts/contracts/TokenSale.sol` | â³ |
| NFT é”€å”®åˆçº¦ | `contracts/contracts/NFTSale.sol` | â³ |
| åˆçº¦æµ‹è¯• | `contracts/test/TokenSale.test.ts` | â³ |

### 8.4 æ–‡æ¡£äº¤ä»˜ç‰©

| äº¤ä»˜ç‰© | æ–‡ä»¶è·¯å¾„ | çŠ¶æ€ |
|--------|----------|------|
| API æ–‡æ¡£ | `docs/api/token-api.md` | â³ |
| API æ–‡æ¡£ | `docs/api/nft-api.md` | â³ |
| æ™ºèƒ½åˆçº¦æ–‡æ¡£ | `docs/contracts/README.md` | â³ |
| éƒ¨ç½²æ–‡æ¡£ | `docs/deployment/README.md` | â³ |

---

## 9. æ€»ç»“

### 9.1 å¼€å‘å·¥ä½œé‡ç»Ÿè®¡

| æ¨¡å— | å·¥ä½œé‡ | ä¼˜å…ˆçº§ |
|------|--------|--------|
| å‰ç«¯å¼€å‘ | 17 å¤© | P0 |
| åç«¯å¼€å‘ | 35 å¤© | P0 |
| æ™ºèƒ½åˆçº¦å¼€å‘ | 11 å¤© | P0 |
| **æ€»è®¡** | **63 å¤©** | - |

### 9.2 å…³é”®é‡Œç¨‹ç¢‘

1. **Week 6**ï¼šä»£å¸å’Œ NFT å¯ä»¥é€šè¿‡ Agent å‘è¡Œ
2. **Week 10**ï¼šä»£å¸å’Œ NFT å¯ä»¥ç›´æ¥äº¤æ˜“
3. **Week 12**ï¼šæ”¯æŒä»£å¸å’Œ NFT é¢„å”®
4. **Week 14**ï¼šæ‰€æœ‰åŠŸèƒ½æµ‹è¯•é€šè¿‡ï¼Œå‡†å¤‡ä¸Šçº¿

### 9.3 é£é™©ä¸åº”å¯¹

#### é£é™©1ï¼šæ™ºèƒ½åˆçº¦éƒ¨ç½²å¤±è´¥
- **åº”å¯¹**ï¼šå®Œå–„çš„é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
- **åº”å¯¹**ï¼šæµ‹è¯•ç½‘å……åˆ†æµ‹è¯•

#### é£é™©2ï¼šIPFS/Arweave ä¸Šä¼ å¤±è´¥
- **åº”å¯¹**ï¼šå¤šå­˜å‚¨æ–¹æ¡ˆæ”¯æŒ
- **åº”å¯¹**ï¼šæœ¬åœ°å¤‡ä»½æœºåˆ¶

#### é£é™©3ï¼šAgent æ„å›¾è¯†åˆ«ä¸å‡†ç¡®
- **åº”å¯¹**ï¼šå®Œå–„çš„å¼•å¯¼æµç¨‹
- **åº”å¯¹**ï¼šé”™è¯¯æç¤ºå’Œé‡è¯•æœºåˆ¶

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šV3.0  
**æœ€åæ›´æ–°**ï¼š2025å¹´1æœˆ

---

*æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº† PayMind V3.0 çš„æŠ€æœ¯å¼€å‘å†…å®¹ï¼ŒåŒ…æ‹¬å‰ç«¯ã€åç«¯ã€æ™ºèƒ½åˆçº¦çš„å¼€å‘ä»»åŠ¡ã€å·¥ä½œé‡å’Œäº¤ä»˜ç‰©ã€‚*

