# æµ‹è¯•ç»“ç®—åŠŸèƒ½ - æ‰€æœ‰åœºæ™¯

## ğŸ¯ æµ‹è¯•ç›®æ ‡

éªŒè¯V3.0ç»“ç®—åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œï¼ŒåŒ…æ‹¬ï¼š
1. NFT/è™šæ‹Ÿèµ„äº§å³æ—¶ç»“ç®—
2. æœåŠ¡ç±»è®¢å•ç»“ç®—
3. å®ä½“å•†å“è®¢å•ç»“ç®—ï¼ˆ7å¤©è‡ªåŠ¨ç¡®è®¤ï¼‰
4. å®šæ—¶ä»»åŠ¡è‡ªåŠ¨ç¡®è®¤æ”¶è´§

---

## âœ… æµ‹è¯•å‰å‡†å¤‡

### 1. æœåŠ¡å¯åŠ¨æ£€æŸ¥

```bash
# æ£€æŸ¥åç«¯æœåŠ¡
curl http://localhost:3001/api/health

# æ£€æŸ¥å‰ç«¯æœåŠ¡
curl http://localhost:3000
```

### 2. æµ‹è¯•æ•°æ®å‡†å¤‡

- [ ] åˆ›å»ºæµ‹è¯•ç”¨æˆ·
- [ ] åˆ›å»ºæµ‹è¯•å•†å“ï¼ˆNFTã€æœåŠ¡ã€å®ä½“å•†å“ï¼‰
- [ ] å‡†å¤‡æµ‹è¯•æ”¯ä»˜æ•°æ®

---

## ğŸ§ª æµ‹è¯•åœºæ™¯

### åœºæ™¯1ï¼šNFT/è™šæ‹Ÿèµ„äº§å³æ—¶ç»“ç®—

**æµ‹è¯•æ­¥éª¤**ï¼š
1. åˆ›å»ºNFTè®¢å•
   ```bash
   POST http://localhost:3001/api/payments/process
   {
     "amount": 100,
     "currency": "USDC",
     "paymentMethod": "wallet",
     "merchantId": "merchant-id",
     "metadata": {
       "orderType": "nft",
       "category": "nft"
     }
   }
   ```

2. æ”¯ä»˜å®Œæˆ

3. **éªŒè¯ç‚¹**ï¼š
   - [ ] EscrowçŠ¶æ€ç«‹å³å˜ä¸º `RELEASED`
   - [ ] èµ„é‡‘ç«‹å³åˆ†æˆï¼ˆå•†å®¶ 88%ï¼ŒAgent 6%ï¼ŒPayMind 6%ï¼‰
   - [ ] æ”¯ä»˜çŠ¶æ€å˜ä¸º `COMPLETED`
   - [ ] æ—¥å¿—æ˜¾ç¤º"å³æ—¶ç»“ç®—æ‰˜ç®¡äº¤æ˜“"

**é¢„æœŸç»“æœ**ï¼š
- âœ… æ”¯ä»˜å®Œæˆåç«‹å³ç»“ç®—
- âœ… æ— éœ€ç­‰å¾…ç”¨æˆ·ç¡®è®¤
- âœ… èµ„é‡‘ç«‹å³é‡Šæ”¾

---

### åœºæ™¯2ï¼šæœåŠ¡ç±»è®¢å•ç»“ç®—

**æµ‹è¯•æ­¥éª¤**ï¼š
1. åˆ›å»ºæœåŠ¡è®¢å•
   ```bash
   POST http://localhost:3001/api/payments/process
   {
     "amount": 100,
     "currency": "USDC",
     "paymentMethod": "wallet",
     "merchantId": "merchant-id",
     "metadata": {
       "orderType": "service"
     }
   }
   ```

2. æ”¯ä»˜å®Œæˆ

3. **éªŒè¯ç‚¹**ï¼š
   - [ ] EscrowçŠ¶æ€ä¸º `FUNDED`ï¼ˆç­‰å¾…æœåŠ¡å¼€å§‹ï¼‰
   - [ ] æ—¥å¿—æ˜¾ç¤º"æœåŠ¡ç±»è®¢å•ç­‰å¾…æœåŠ¡å¼€å§‹"
   - [ ] ä¸ä¼šè‡ªåŠ¨ç»“ç®—

4. ç”¨æˆ·ç¡®è®¤æœåŠ¡å¼€å§‹
   ```bash
   POST http://localhost:3001/api/payments/escrow/{escrowId}/confirm-delivery
   ```

5. **éªŒè¯ç‚¹**ï¼š
   - [ ] EscrowçŠ¶æ€å˜ä¸º `RELEASED`
   - [ ] èµ„é‡‘åˆ†æˆï¼ˆå•†å®¶ 82%ï¼ŒAgent 10%ï¼ŒPayMind 8%ï¼‰

**é¢„æœŸç»“æœ**ï¼š
- âœ… æ”¯ä»˜å®Œæˆåç­‰å¾…æœåŠ¡å¼€å§‹
- âœ… éœ€è¦ç”¨æˆ·ç¡®è®¤æœåŠ¡å¼€å§‹
- âœ… ç¡®è®¤åç«‹å³ç»“ç®—

---

### åœºæ™¯3ï¼šå®ä½“å•†å“è®¢å•ç»“ç®—ï¼ˆç”¨æˆ·ç¡®è®¤æ”¶è´§ï¼‰

**æµ‹è¯•æ­¥éª¤**ï¼š
1. åˆ›å»ºå®ä½“å•†å“è®¢å•
   ```bash
   POST http://localhost:3001/api/payments/process
   {
     "amount": 100,
     "currency": "USDC",
     "paymentMethod": "wallet",
     "merchantId": "merchant-id",
     "metadata": {
       "orderType": "product"
     }
   }
   ```

2. æ”¯ä»˜å®Œæˆ

3. **éªŒè¯ç‚¹**ï¼š
   - [ ] EscrowçŠ¶æ€ä¸º `FUNDED`ï¼ˆç­‰å¾…ç¡®è®¤æ”¶è´§ï¼‰
   - [ ] æ—¥å¿—æ˜¾ç¤º"å®ä½“å•†å“è®¢å•ç­‰å¾…ç¡®è®¤æ”¶è´§ï¼ˆ7å¤©åè‡ªåŠ¨ç¡®è®¤ï¼‰"
   - [ ] ä¸ä¼šè‡ªåŠ¨ç»“ç®—

4. ç”¨æˆ·ç¡®è®¤æ”¶è´§
   ```bash
   POST http://localhost:3001/api/payments/escrow/{escrowId}/confirm-delivery
   ```

5. **éªŒè¯ç‚¹**ï¼š
   - [ ] EscrowçŠ¶æ€å˜ä¸º `RELEASED`
   - [ ] èµ„é‡‘åˆ†æˆï¼ˆå•†å®¶ 78%ï¼ŒAgent 12%ï¼ŒPayMind 10%ï¼‰

**é¢„æœŸç»“æœ**ï¼š
- âœ… æ”¯ä»˜å®Œæˆåç­‰å¾…ç¡®è®¤æ”¶è´§
- âœ… ç”¨æˆ·å¯ä»¥æå‰ç¡®è®¤æ”¶è´§
- âœ… ç¡®è®¤åç«‹å³ç»“ç®—

---

### åœºæ™¯4ï¼šå®ä½“å•†å“è®¢å•ç»“ç®—ï¼ˆ7å¤©è‡ªåŠ¨ç¡®è®¤ï¼‰

**æµ‹è¯•æ­¥éª¤**ï¼š
1. åˆ›å»ºå®ä½“å•†å“è®¢å•ï¼ˆæ¨¡æ‹Ÿ7å¤©å‰ï¼‰
   ```bash
   POST http://localhost:3001/api/payments/process
   {
     "amount": 100,
     "currency": "USDC",
     "paymentMethod": "wallet",
     "merchantId": "merchant-id",
     "metadata": {
       "orderType": "product"
     }
   }
   ```

2. ä¿®æ”¹escrowåˆ›å»ºæ—¶é—´ä¸º7å¤©å‰ï¼ˆæµ‹è¯•ç¯å¢ƒï¼‰

3. ç­‰å¾…å®šæ—¶ä»»åŠ¡æ‰§è¡Œï¼ˆæˆ–æ‰‹åŠ¨è§¦å‘ï¼‰
   ```bash
   # æ‰‹åŠ¨è§¦å‘å®šæ—¶ä»»åŠ¡ï¼ˆæµ‹è¯•ï¼‰
   POST http://localhost:3001/api/payments/escrow/auto-confirm
   ```

4. **éªŒè¯ç‚¹**ï¼š
   - [ ] å®šæ—¶ä»»åŠ¡æ‰§è¡ŒæˆåŠŸ
   - [ ] EscrowçŠ¶æ€å˜ä¸º `RELEASED`
   - [ ] èµ„é‡‘åˆ†æˆæ­£ç¡®
   - [ ] æ—¥å¿—æ˜¾ç¤º"è‡ªåŠ¨ç¡®è®¤æ”¶è´§"

**é¢„æœŸç»“æœ**ï¼š
- âœ… 7å¤©åè‡ªåŠ¨ç¡®è®¤æ”¶è´§
- âœ… æ— éœ€ç”¨æˆ·æ“ä½œ
- âœ… è‡ªåŠ¨ç»“ç®—

---

## ğŸ” APIæµ‹è¯•

### æµ‹è¯•1ï¼šåˆ›å»ºNFTè®¢å•å¹¶æ”¯ä»˜

```bash
# 1. åˆ›å»ºæ”¯ä»˜
curl -X POST http://localhost:3001/api/payments/process \
  -H "Content-Type: application/json" \
  -d '{
    "amount": 100,
    "currency": "USDC",
    "paymentMethod": "wallet",
    "merchantId": "test-merchant",
    "metadata": {
      "orderType": "nft"
    }
  }'

# 2. æ£€æŸ¥escrowçŠ¶æ€
curl http://localhost:3001/api/payments/escrow/{escrowId}

# é¢„æœŸï¼šstatus = "released"
```

### æµ‹è¯•2ï¼šåˆ›å»ºæœåŠ¡è®¢å•å¹¶æ”¯ä»˜

```bash
# 1. åˆ›å»ºæ”¯ä»˜
curl -X POST http://localhost:3001/api/payments/process \
  -H "Content-Type: application/json" \
  -d '{
    "amount": 100,
    "currency": "USDC",
    "paymentMethod": "wallet",
    "merchantId": "test-merchant",
    "metadata": {
      "orderType": "service"
    }
  }'

# 2. æ£€æŸ¥escrowçŠ¶æ€
curl http://localhost:3001/api/payments/escrow/{escrowId}

# é¢„æœŸï¼šstatus = "funded"

# 3. ç¡®è®¤æœåŠ¡å¼€å§‹
curl -X POST http://localhost:3001/api/payments/escrow/{escrowId}/confirm-delivery \
  -H "Content-Type: application/json" \
  -d '{
    "userId": "test-user"
  }'

# 4. å†æ¬¡æ£€æŸ¥escrowçŠ¶æ€
curl http://localhost:3001/api/payments/escrow/{escrowId}

# é¢„æœŸï¼šstatus = "released"
```

### æµ‹è¯•3ï¼šåˆ›å»ºå®ä½“å•†å“è®¢å•å¹¶æ”¯ä»˜

```bash
# 1. åˆ›å»ºæ”¯ä»˜
curl -X POST http://localhost:3001/api/payments/process \
  -H "Content-Type: application/json" \
  -d '{
    "amount": 100,
    "currency": "USDC",
    "paymentMethod": "wallet",
    "merchantId": "test-merchant",
    "metadata": {
      "orderType": "product"
    }
  }'

# 2. æ£€æŸ¥escrowçŠ¶æ€
curl http://localhost:3001/api/payments/escrow/{escrowId}

# é¢„æœŸï¼šstatus = "funded"

# 3. ç¡®è®¤æ”¶è´§
curl -X POST http://localhost:3001/api/payments/escrow/{escrowId}/confirm-delivery \
  -H "Content-Type: application/json" \
  -d '{
    "userId": "test-user"
  }'

# 4. å†æ¬¡æ£€æŸ¥escrowçŠ¶æ€
curl http://localhost:3001/api/payments/escrow/{escrowId}

# é¢„æœŸï¼šstatus = "released"
```

---

## ğŸ“Š æµ‹è¯•ç»“æœè®°å½•

### æµ‹è¯•æ—¥æœŸï¼š___________

### åœºæ™¯1ï¼šNFT/è™šæ‹Ÿèµ„äº§å³æ—¶ç»“ç®—
- [ ] é€šè¿‡
- [ ] å¤±è´¥
- é—®é¢˜ï¼š___________

### åœºæ™¯2ï¼šæœåŠ¡ç±»è®¢å•ç»“ç®—
- [ ] é€šè¿‡
- [ ] å¤±è´¥
- é—®é¢˜ï¼š___________

### åœºæ™¯3ï¼šå®ä½“å•†å“è®¢å•ç»“ç®—ï¼ˆç”¨æˆ·ç¡®è®¤æ”¶è´§ï¼‰
- [ ] é€šè¿‡
- [ ] å¤±è´¥
- é—®é¢˜ï¼š___________

### åœºæ™¯4ï¼šå®ä½“å•†å“è®¢å•ç»“ç®—ï¼ˆ7å¤©è‡ªåŠ¨ç¡®è®¤ï¼‰
- [ ] é€šè¿‡
- [ ] å¤±è´¥
- é—®é¢˜ï¼š___________

---

## ğŸ› é—®é¢˜è®°å½•

### é—®é¢˜1ï¼š___________
**æè¿°**ï¼š___________
**è§£å†³æ–¹æ¡ˆ**ï¼š___________

---

## âœ… æµ‹è¯•å®Œæˆç¡®è®¤

- [ ] æ‰€æœ‰æµ‹è¯•åœºæ™¯é€šè¿‡
- [ ] æ‰€æœ‰APIæµ‹è¯•é€šè¿‡
- [ ] æ— ç¼–è¯‘é”™è¯¯
- [ ] æ— è¿è¡Œæ—¶é”™è¯¯
- [ ] æ—¥å¿—è®°å½•æ­£ç¡®
- [ ] èµ„é‡‘åˆ†æˆæ­£ç¡®

**æµ‹è¯•äººå‘˜ç­¾å**ï¼š___________
**æµ‹è¯•å®Œæˆæ—¥æœŸ**ï¼š___________

