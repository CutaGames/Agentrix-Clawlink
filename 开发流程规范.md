# Agentrix å¼€å‘æµç¨‹è§„èŒƒ

## ğŸ“‹ åŸåˆ™

**å•ä¸€æ•°æ®æºåŸåˆ™**ï¼šæœ¬åœ°ä»£ç æ˜¯å”¯ä¸€çš„æ•°æ®æºï¼Œäº‘ç«¯æœåŠ¡å™¨åªç”¨äºéƒ¨ç½²å’Œæµ‹è¯•ã€‚

---

## ğŸ”„ æ ‡å‡†å¼€å‘æµç¨‹

### 1. **æ—¥å¸¸å¼€å‘ï¼ˆæœ¬åœ°ï¼‰**

```bash
# 1. åœ¨æœ¬åœ°è¿›è¡Œå¼€å‘
cd /mnt/d/wsl/Ubuntu-24.04/Code/Paymind/paymind-website/backend

# 2. ä¿®æ”¹ä»£ç 
# ... ç¼–è¾‘æ–‡ä»¶ ...

# 3. æœ¬åœ°æµ‹è¯•
npm run start:dev

# 4. æµ‹è¯•é€šè¿‡åï¼Œæäº¤åˆ° Git
git add .
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"
git push
```

### 2. **éƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼ˆä»æœ¬åœ°ï¼‰**

```bash
# æ–¹å¼ A: ä½¿ç”¨ scp ä¸Šä¼ ï¼ˆæ¨èç”¨äºå¿«é€Ÿä¿®å¤ï¼‰
cd /mnt/d/wsl/Ubuntu-24.04/Code/Paymind/paymind-website/backend

# ä¸Šä¼ å•ä¸ªæ–‡ä»¶
scp src/modules/auth/auth.controller.ts root@129.226.152.88:/var/www/agentrix-website/backend/src/modules/auth/

# ä¸Šä¼ æ•´ä¸ªæ¨¡å—
scp -r src/modules/auth/* root@129.226.152.88:/var/www/agentrix-website/backend/src/modules/auth/

# æ–¹å¼ B: ä½¿ç”¨ Gitï¼ˆæ¨èç”¨äºå®Œæ•´éƒ¨ç½²ï¼‰
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
ssh root@129.226.152.88
cd /var/www/agentrix-website
git pull origin main
cd backend
npm run build
pm2 restart agentrix-backend --update-env
```

---

## ğŸš« ç¦æ­¢çš„æ“ä½œ

### âŒ ä¸è¦åœ¨æœåŠ¡å™¨ä¸Šç›´æ¥ä¿®æ”¹ä»£ç 

**é”™è¯¯åšæ³•ï¼š**
```bash
# âŒ ä¸è¦è¿™æ ·åš
ssh root@129.226.152.88
cd /var/www/agentrix-website/backend
nano src/modules/auth/auth.service.ts  # ç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šç¼–è¾‘
```

**æ­£ç¡®åšæ³•ï¼š**
```bash
# âœ… æ­£ç¡®åšæ³•
# 1. åœ¨æœ¬åœ°ä¿®æ”¹
# 2. æµ‹è¯•é€šè¿‡
# 3. æäº¤åˆ° Git
# 4. ä¸Šä¼ åˆ°æœåŠ¡å™¨
```

---

## ğŸ“¦ ä»£ç åŒæ­¥æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1ï¼šGit åŒæ­¥ï¼ˆæ¨èï¼‰

**æœ¬åœ° â†’ æœåŠ¡å™¨ï¼š**

```bash
# æœ¬åœ°ï¼šæäº¤ä»£ç 
git add .
git commit -m "feat: æ·»åŠ  auth æ¨¡å—"
git push origin main

# æœåŠ¡å™¨ï¼šæ‹‰å–ä»£ç 
ssh root@129.226.152.88
cd /var/www/agentrix-website
git pull origin main
cd backend
npm run build
pm2 restart agentrix-backend --update-env
```

### æ–¹æ¡ˆ 2ï¼šSCP åŒæ­¥ï¼ˆå¿«é€Ÿä¿®å¤ï¼‰

**é€‚ç”¨äºï¼š**
- ç´§æ€¥ä¿®å¤
- å•ä¸ªæ–‡ä»¶ä¿®æ”¹
- ä¸´æ—¶æµ‹è¯•

```bash
# ä¸Šä¼ å•ä¸ªæ–‡ä»¶
scp backend/src/modules/auth/auth.service.ts root@129.226.152.88:/var/www/agentrix-website/backend/src/modules/auth/

# ä¸Šä¼ æ•´ä¸ªç›®å½•
scp -r backend/src/modules/auth/* root@129.226.152.88:/var/www/agentrix-website/backend/src/modules/auth/
```

### æ–¹æ¡ˆ 3ï¼šä»æœåŠ¡å™¨æ‹‰å–ï¼ˆä»…ç”¨äºæ¢å¤ï¼‰

**ä»…åœ¨ä»¥ä¸‹æƒ…å†µä½¿ç”¨ï¼š**
- æœ¬åœ°æ–‡ä»¶ä¸¢å¤±
- éœ€è¦æ¢å¤æœåŠ¡å™¨ä¸Šçš„ä»£ç 

```bash
# ä»æœåŠ¡å™¨æ‹‰å–åˆ°æœ¬åœ°ï¼ˆè¦†ç›–æœ¬åœ°ï¼‰
scp -r root@129.226.152.88:/var/www/agentrix-website/backend/src/* ./backend/src/
```

---

## ğŸ”§ å½“å‰é—®é¢˜ä¿®å¤æµç¨‹

### æ­¥éª¤ 1ï¼šç¡®å®šä»£ç æº

```bash
# æ£€æŸ¥æœ¬åœ°å’ŒæœåŠ¡å™¨ä»£ç å·®å¼‚
# æœ¬åœ°
cd backend
git status

# æœåŠ¡å™¨
ssh root@129.226.152.88
cd /var/www/agentrix-website/backend
git status
```

### æ­¥éª¤ 2ï¼šç»Ÿä¸€ä»£ç æº

**å¦‚æœæœåŠ¡å™¨ä»£ç æ›´æ–°ï¼š**
```bash
# ä»æœåŠ¡å™¨æ‹‰å–åˆ°æœ¬åœ°ï¼ˆä»…ç”¨äºæ¢å¤ï¼‰
scp -r root@129.226.152.88:/var/www/agentrix-website/backend/src/* ./backend/src/
```

**å¦‚æœæœ¬åœ°ä»£ç æ›´æ–°ï¼š**
```bash
# æäº¤åˆ° Git
git add .
git commit -m "fix: åŒæ­¥ä»£ç "
git push

# éƒ¨ç½²åˆ°æœåŠ¡å™¨
ssh root@129.226.152.88
cd /var/www/agentrix-website
git pull
cd backend
npm run build
pm2 restart agentrix-backend --update-env
```

---

## ğŸ“ å¼€å‘å·¥ä½œæµç¨‹

### å¼€å‘æ–°åŠŸèƒ½

1. **åˆ›å»ºåˆ†æ”¯**ï¼ˆå¯é€‰ï¼‰
   ```bash
   git checkout -b feature/new-feature
   ```

2. **æœ¬åœ°å¼€å‘**
   - åœ¨æœ¬åœ°ä¿®æ”¹ä»£ç 
   - æœ¬åœ°æµ‹è¯•ï¼š`npm run start:dev`

3. **æäº¤ä»£ç **
   ```bash
   git add .
   git commit -m "feat: æ–°åŠŸèƒ½æè¿°"
   git push
   ```

4. **éƒ¨ç½²åˆ°æœåŠ¡å™¨**
   ```bash
   # æ–¹å¼ A: Git éƒ¨ç½²
   ssh root@129.226.152.88
   cd /var/www/agentrix-website
   git pull
   cd backend
   npm run build
   pm2 restart agentrix-backend --update-env
   
   # æ–¹å¼ B: SCP éƒ¨ç½²ï¼ˆå¿«é€Ÿï¼‰
   scp -r backend/src/modules/new-module/* root@129.226.152.88:/var/www/agentrix-website/backend/src/modules/new-module/
   ```

### ä¿®å¤ Bug

1. **æœ¬åœ°ä¿®å¤**
   ```bash
   # åœ¨æœ¬åœ°ä¿®æ”¹ä»£ç 
   # æµ‹è¯•ä¿®å¤
   npm run start:dev
   ```

2. **å¿«é€Ÿéƒ¨ç½²**
   ```bash
   # ä¸Šä¼ ä¿®å¤çš„æ–‡ä»¶
   scp backend/src/modules/auth/auth.service.ts root@129.226.152.88:/var/www/agentrix-website/backend/src/modules/auth/
   
   # æœåŠ¡å™¨ä¸Šé‡æ–°æ„å»º
   ssh root@129.226.152.88
   cd /var/www/agentrix-website/backend
   npm run build
   pm2 restart agentrix-backend --update-env
   ```

3. **æäº¤åˆ° Git**
   ```bash
   git add .
   git commit -m "fix: ä¿®å¤ç™»å½•é—®é¢˜"
   git push
   ```

---

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

### æœ¬åœ°å¼€å‘

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run start:dev

# æ„å»ºé¡¹ç›®
npm run build

# æŸ¥çœ‹æ—¥å¿—
npm run start:dev | tee dev.log
```

### æœåŠ¡å™¨éƒ¨ç½²

```bash
# SSH åˆ°æœåŠ¡å™¨
ssh root@129.226.152.88

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /var/www/agentrix-website/backend

# æ‹‰å–æœ€æ–°ä»£ç 
git pull

# æ„å»ºé¡¹ç›®
npm run build

# é‡å¯æœåŠ¡
pm2 restart agentrix-backend --update-env

# æŸ¥çœ‹æ—¥å¿—
pm2 logs agentrix-backend
```

### å¿«é€Ÿä¸Šä¼ æ–‡ä»¶

```bash
# ä¸Šä¼ å•ä¸ªæ–‡ä»¶
scp backend/src/modules/auth/auth.controller.ts root@129.226.152.88:/var/www/agentrix-website/backend/src/modules/auth/

# ä¸Šä¼ æ•´ä¸ªæ¨¡å—
scp -r backend/src/modules/auth/* root@129.226.152.88:/var/www/agentrix-website/backend/src/modules/auth/

# ä¸Šä¼ å¤šä¸ªæ–‡ä»¶
scp backend/src/modules/auth/*.ts root@129.226.152.88:/var/www/agentrix-website/backend/src/modules/auth/
```

---

## ğŸ“‹ æ£€æŸ¥æ¸…å•

### å¼€å‘å‰

- [ ] ç¡®è®¤æœ¬åœ°ä»£ç æ˜¯æœ€æ–°çš„ï¼ˆ`git pull`ï¼‰
- [ ] ç¡®è®¤æœ¬åœ°ç¯å¢ƒé…ç½®æ­£ç¡®ï¼ˆ`.env` æ–‡ä»¶ï¼‰

### å¼€å‘ä¸­

- [ ] åœ¨æœ¬åœ°æµ‹è¯•åŠŸèƒ½
- [ ] æ£€æŸ¥ä»£ç æ ¼å¼ï¼ˆ`npm run lint`ï¼‰
- [ ] æäº¤ä»£ç åˆ° Git

### éƒ¨ç½²å‰

- [ ] ä»£ç å·²æäº¤åˆ° Git
- [ ] æœ¬åœ°æµ‹è¯•é€šè¿‡
- [ ] æ£€æŸ¥æœåŠ¡å™¨ç¯å¢ƒå˜é‡

### éƒ¨ç½²å

- [ ] æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—
- [ ] æµ‹è¯• API ç«¯ç‚¹
- [ ] ç¡®è®¤åŠŸèƒ½æ­£å¸¸

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ°¸è¿œä¸è¦åœ¨æœåŠ¡å™¨ä¸Šç›´æ¥ç¼–è¾‘ä»£ç **
   - æœåŠ¡å™¨ä¸Šçš„ä¿®æ”¹ä¼šä¸¢å¤±
   - æ— æ³•ç‰ˆæœ¬æ§åˆ¶
   - å®¹æ˜“é€ æˆä»£ç ä¸ä¸€è‡´

2. **ä½¿ç”¨ Git è¿›è¡Œç‰ˆæœ¬æ§åˆ¶**
   - æ‰€æœ‰ä»£ç ä¿®æ”¹éƒ½è¦æäº¤åˆ° Git
   - ä½¿ç”¨æœ‰æ„ä¹‰çš„ commit ä¿¡æ¯

3. **ç¯å¢ƒå˜é‡ç®¡ç†**
   - `.env` æ–‡ä»¶ä¸è¦æäº¤åˆ° Git
   - æœåŠ¡å™¨ä¸Šçš„ `.env` å•ç‹¬ç®¡ç†

4. **æ•°æ®åº“è¿ç§»**
   - ä½¿ç”¨ TypeORM migrations
   - ä¸è¦ç›´æ¥ä¿®æ”¹æ•°æ®åº“ç»“æ„

---

## ğŸ”„ ç´§æ€¥æƒ…å†µå¤„ç†

### æœåŠ¡å™¨ä»£ç ä¸¢å¤±

```bash
# ä» Git æ¢å¤
ssh root@129.226.152.88
cd /var/www/agentrix-website
git reset --hard origin/main
git pull
cd backend
npm run build
pm2 restart agentrix-backend --update-env
```

### æœ¬åœ°ä»£ç ä¸¢å¤±

```bash
# ä» Git æ¢å¤
cd backend
git reset --hard origin/main
git pull
```

### ä»£ç å†²çª

```bash
# æŸ¥çœ‹å†²çª
git status

# è§£å†³å†²çªå
git add .
git commit -m "fix: è§£å†³å†²çª"
git push
```

---

## ğŸ“ é—®é¢˜æ’æŸ¥

### ä»£ç ä¸åŒæ­¥

1. æ£€æŸ¥ Git çŠ¶æ€
   ```bash
   git status
   git log --oneline -10
   ```

2. æ¯”è¾ƒæœ¬åœ°å’ŒæœåŠ¡å™¨
   ```bash
   # æœ¬åœ°
   git diff
   
   # æœåŠ¡å™¨
   ssh root@129.226.152.88
   cd /var/www/agentrix-website
   git diff
   ```

3. ç»Ÿä¸€ä»£ç æº
   - ç¡®å®šå“ªä¸ªç‰ˆæœ¬æ˜¯æ­£ç¡®çš„
   - ä½¿ç”¨ Git æˆ– SCP åŒæ­¥

---

## ğŸ¯ æœ€ä½³å®è·µ

1. **å¼€å‘åœ¨æœ¬åœ°ï¼Œéƒ¨ç½²åœ¨æœåŠ¡å™¨**
2. **ä½¿ç”¨ Git è¿›è¡Œç‰ˆæœ¬æ§åˆ¶**
3. **æ¯æ¬¡éƒ¨ç½²å‰éƒ½è¦æµ‹è¯•**
4. **ä¿æŒä»£ç åŒæ­¥**
5. **ä½¿ç”¨æœ‰æ„ä¹‰çš„ commit ä¿¡æ¯**

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- Git å·¥ä½œæµç¨‹ï¼š`ä¸Šä¼ åˆ°GitHub-WSL.sh`
- æœåŠ¡å™¨éƒ¨ç½²ï¼š`deploy-to-server.sh`
- ä»£ç åŒæ­¥ï¼š`sync-from-server.sh`

