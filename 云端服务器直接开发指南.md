# äº‘ç«¯æœåŠ¡å™¨ç›´æ¥å¼€å‘æŒ‡å—

## ğŸ¯ æ¦‚è¿°

ç›´æ¥åœ¨äº‘ç«¯æœåŠ¡å™¨ï¼ˆ129.226.152.88ï¼‰ä¸Šè¿›è¡Œå¼€å‘ï¼Œæ— éœ€æœ¬åœ°å¼€å‘å†ä¸Šä¼ ã€‚

## âœ… ä¼˜åŠ¿

1. **å®æ—¶ç”Ÿæ•ˆ** - ä¿®æ”¹ä»£ç åç«‹å³æµ‹è¯•
2. **æ— éœ€ä¸Šä¼ ** - ç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šç¼–è¾‘
3. **å¿«é€Ÿè¿­ä»£** - ä¿®æ”¹ã€æ„å»ºã€æµ‹è¯•ä¸€æ°”å‘µæˆ
4. **ç¯å¢ƒä¸€è‡´** - å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒä¸€è‡´

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. SSH è¿æ¥åˆ°æœåŠ¡å™¨

```bash
ssh root@129.226.152.88
```

### 2. è¿›å…¥é¡¹ç›®ç›®å½•

```bash
cd /var/www/agentrix-website/backend
```

### 3. å®‰è£… OpenAI SDKï¼ˆå¦‚æœéœ€è¦ï¼‰

```bash
npm install openai
```

### 4. å¼€å‘æ¨¡å¼å¯åŠ¨

```bash
# ä½¿ç”¨å¼€å‘æ¨¡å¼ï¼ˆè‡ªåŠ¨é‡è½½ï¼‰
npm run start:dev

# æˆ–è€…ä½¿ç”¨ PM2 å¼€å‘æ¨¡å¼
pm2 start npm --name "agentrix-backend-dev" -- run start:dev
```

## ğŸ“ å¼€å‘å·¥ä½œæµ

### æ–¹å¼ Aï¼šä½¿ç”¨ PM2 å¼€å‘æ¨¡å¼ï¼ˆæ¨èï¼‰

```bash
# 1. åœæ­¢ç”Ÿäº§æœåŠ¡
pm2 stop agentrix-backend

# 2. å¯åŠ¨å¼€å‘æ¨¡å¼
cd /var/www/agentrix-website/backend
pm2 start npm --name "agentrix-backend-dev" -- run start:dev --watch

# 3. æŸ¥çœ‹æ—¥å¿—
pm2 logs agentrix-backend-dev

# 4. ä¿®æ”¹ä»£ç åï¼ŒPM2 ä¼šè‡ªåŠ¨é‡å¯ï¼ˆå¦‚æœä½¿ç”¨ --watchï¼‰
```

### æ–¹å¼ Bï¼šç›´æ¥è¿è¡Œå¼€å‘æ¨¡å¼

```bash
# 1. åœæ­¢ PM2 æœåŠ¡
pm2 stop agentrix-backend

# 2. å¯åŠ¨å¼€å‘æ¨¡å¼
cd /var/www/agentrix-website/backend
npm run start:dev

# 3. ä¿®æ”¹ä»£ç åï¼ŒNestJS ä¼šè‡ªåŠ¨é‡è½½
```

### æ–¹å¼ Cï¼šä½¿ç”¨ screen æˆ– tmuxï¼ˆä¿æŒä¼šè¯ï¼‰

```bash
# 1. åˆ›å»º screen ä¼šè¯
screen -S agentrix-dev

# 2. å¯åŠ¨å¼€å‘æ¨¡å¼
cd /var/www/agentrix-website/backend
npm run start:dev

# 3. æŒ‰ Ctrl+A ç„¶å D é€€å‡ºï¼ˆæœåŠ¡ç»§ç»­è¿è¡Œï¼‰

# 4. é‡æ–°è¿æ¥
screen -r agentrix-dev
```

## ğŸ”§ å¸¸ç”¨æ“ä½œ

### å®‰è£…æ–°ä¾èµ–

```bash
cd /var/www/agentrix-website/backend
npm install openai
npm install --save-dev @types/node
```

### é‡æ–°æ„å»º

```bash
cd /var/www/agentrix-website/backend
npm run build
pm2 restart agentrix-backend --update-env
```

### æŸ¥çœ‹æ—¥å¿—

```bash
# PM2 æ—¥å¿—
pm2 logs agentrix-backend

# å¼€å‘æ¨¡å¼æ—¥å¿—ï¼ˆå¦‚æœç›´æ¥è¿è¡Œï¼‰
# æ—¥å¿—ä¼šç›´æ¥è¾“å‡ºåˆ°ç»ˆç«¯
```

### æµ‹è¯• API

```bash
# åœ¨æœåŠ¡å™¨ä¸Šç›´æ¥æµ‹è¯•
curl http://localhost:3001/api/openai/functions

# æµ‹è¯•å¯¹è¯æ¥å£
curl -X POST http://localhost:3001/api/openai/chat \
  -H "Content-Type: application/json" \
  -d '{
    "messages": [
      {"role": "user", "content": "æˆ‘è¦ä¹° iPhone 15"}
    ],
    "context": {
      "sessionId": "test-123"
    }
  }'
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
/var/www/agentrix-website/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ modules/
â”‚   â”‚       â””â”€â”€ ai-integration/
â”‚   â”‚           â”œâ”€â”€ gemini/
â”‚   â”‚           â””â”€â”€ openai/          # æ–°åˆ›å»ºçš„ OpenAI é›†æˆ
â”‚   â”œâ”€â”€ dist/                         # ç¼–è¯‘åçš„æ–‡ä»¶
â”‚   â”œâ”€â”€ .env                          # ç¯å¢ƒå˜é‡
â”‚   â””â”€â”€ package.json
â””â”€â”€ agentrixfrontend/
```

## ğŸ› ï¸ ç¼–è¾‘ä»£ç 

### æ–¹å¼ 1ï¼šä½¿ç”¨ vim/nanoï¼ˆæœåŠ¡å™¨ä¸Šç›´æ¥ç¼–è¾‘ï¼‰

```bash
# ä½¿ç”¨ vim
vim /var/www/agentrix-website/backend/src/modules/ai-integration/openai/openai-integration.service.ts

# æˆ–ä½¿ç”¨ nanoï¼ˆæ›´ç®€å•ï¼‰
nano /var/www/agentrix-website/backend/src/modules/ai-integration/openai/openai-integration.service.ts
```

### æ–¹å¼ 2ï¼šä½¿ç”¨ VS Code Remote SSHï¼ˆæ¨èï¼‰

1. **å®‰è£… VS Code Remote SSH æ‰©å±•**
2. **è¿æ¥åˆ°æœåŠ¡å™¨ï¼š**
   - æŒ‰ `F1` æˆ– `Ctrl+Shift+P`
   - è¾“å…¥ "Remote-SSH: Connect to Host"
   - è¾“å…¥ï¼š`root@129.226.152.88`
3. **æ‰“å¼€é¡¹ç›®æ–‡ä»¶å¤¹ï¼š**
   - `/var/www/agentrix-website`

**ä¼˜åŠ¿ï¼š**
- âœ… å®Œæ•´çš„ VS Code åŠŸèƒ½
- âœ… è¯­æ³•é«˜äº®ã€è‡ªåŠ¨è¡¥å…¨
- âœ… ç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šç¼–è¾‘
- âœ… æ–‡ä»¶æµè§ˆå™¨ã€ç»ˆç«¯é›†æˆ

### æ–¹å¼ 3ï¼šä½¿ç”¨ SFTP åŒæ­¥ï¼ˆæœ¬åœ°ç¼–è¾‘ï¼Œè‡ªåŠ¨ä¸Šä¼ ï¼‰

å¯ä»¥ä½¿ç”¨ VS Code çš„ SFTP æ‰©å±•ï¼Œæœ¬åœ°ç¼–è¾‘åè‡ªåŠ¨åŒæ­¥åˆ°æœåŠ¡å™¨ã€‚

## ğŸ”„ å¼€å‘æµç¨‹ç¤ºä¾‹

### ç¤ºä¾‹ï¼šæ·»åŠ  OpenAI é›†æˆ

```bash
# 1. SSH è¿æ¥åˆ°æœåŠ¡å™¨
ssh root@129.226.152.88

# 2. è¿›å…¥é¡¹ç›®ç›®å½•
cd /var/www/agentrix-website/backend

# 3. å®‰è£…ä¾èµ–
npm install openai

# 4. åˆ›å»ºæ–‡ä»¶ï¼ˆæˆ–ä½¿ç”¨ VS Code Remote SSH ç¼–è¾‘ï¼‰
# æ–‡ä»¶å·²åˆ›å»ºï¼šopenai-integration.service.ts, controller.ts, module.ts

# 5. å¯åŠ¨å¼€å‘æ¨¡å¼
pm2 stop agentrix-backend
pm2 start npm --name "agentrix-backend-dev" -- run start:dev

# 6. æŸ¥çœ‹æ—¥å¿—
pm2 logs agentrix-backend-dev

# 7. æµ‹è¯•
curl http://localhost:3001/api/openai/functions

# 8. å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œåˆ‡æ¢å›ç”Ÿäº§æ¨¡å¼
pm2 stop agentrix-backend-dev
npm run build
pm2 restart agentrix-backend --update-env
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. å¤‡ä»½é‡è¦æ–‡ä»¶

```bash
# ä¿®æ”¹å‰å¤‡ä»½
cp backend/src/modules/ai-integration/openai/openai-integration.service.ts \
   backend/src/modules/ai-integration/openai/openai-integration.service.ts.bak
```

### 2. ä½¿ç”¨ Git ç‰ˆæœ¬æ§åˆ¶

```bash
# æäº¤æ›´æ”¹
cd /var/www/agentrix-website
git add .
git commit -m "Add OpenAI integration"
git push
```

### 3. ç¯å¢ƒå˜é‡

ç¡®ä¿ `.env` æ–‡ä»¶ä¸­æœ‰ï¼š
```env
OPENAI_API_KEY=your-api-key
GEMINI_API_KEY=your-api-key
```

### 4. ç«¯å£å ç”¨

å¦‚æœå¼€å‘æ¨¡å¼å’Œç”Ÿäº§æ¨¡å¼å†²çªï¼š
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :3001

# åœæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹
pm2 stop agentrix-backend
```

## ğŸ¯ å½“å‰ä»»åŠ¡ï¼šå®Œæˆ OpenAI é›†æˆ

### æ­¥éª¤ 1ï¼šå®‰è£…ä¾èµ–

```bash
ssh root@129.226.152.88
cd /var/www/agentrix-website/backend
npm install openai
```

### æ­¥éª¤ 2ï¼šç¡®è®¤æ–‡ä»¶å·²åˆ›å»º

```bash
# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la src/modules/ai-integration/openai/
```

åº”è¯¥çœ‹åˆ°ï¼š
- `openai-integration.service.ts`
- `openai-integration.controller.ts`
- `openai-integration.module.ts`

### æ­¥éª¤ 3ï¼šç¡®è®¤æ¨¡å—æ³¨å†Œ

```bash
# æ£€æŸ¥ app.module.tsï¼ˆå¦‚æœå­˜åœ¨æºä»£ç ï¼‰
# æˆ–åœ¨ dist/app.module.js ä¸­ç¡®è®¤å·²æ³¨å†Œ
grep -r "OpenAIIntegrationModule" dist/app.module.js
```

### æ­¥éª¤ 4ï¼šé‡æ–°æ„å»º

```bash
npm run build
```

### æ­¥éª¤ 5ï¼šé‡å¯æœåŠ¡

```bash
pm2 restart agentrix-backend --update-env
```

### æ­¥éª¤ 6ï¼šæµ‹è¯•

```bash
curl http://localhost:3001/api/openai/functions
```

## ğŸ“‹ å¼€å‘æ£€æŸ¥æ¸…å•

- [ ] SSH è¿æ¥åˆ°æœåŠ¡å™¨
- [ ] å®‰è£… `openai` npm åŒ…
- [ ] ç¡®è®¤æ–‡ä»¶å·²åˆ›å»º
- [ ] é‡æ–°æ„å»ºé¡¹ç›®
- [ ] é‡å¯æœåŠ¡
- [ ] æµ‹è¯• API ç«¯ç‚¹
- [ ] æµ‹è¯•å¯¹è¯æ¥å£

## ğŸš€ æ¨èå·¥ä½œæµ

1. **ä½¿ç”¨ VS Code Remote SSH** - æœ€ä½³å¼€å‘ä½“éªŒ
2. **å¼€å‘æ¨¡å¼è¿è¡Œ** - è‡ªåŠ¨é‡è½½ï¼Œå¿«é€Ÿè¿­ä»£
3. **Git ç‰ˆæœ¬æ§åˆ¶** - éšæ—¶æäº¤å’Œå›æ»š
4. **æµ‹è¯•åéƒ¨ç½²** - ç¡®è®¤æ— è¯¯ååˆ‡æ¢åˆ°ç”Ÿäº§æ¨¡å¼

