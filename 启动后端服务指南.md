# å¯åŠ¨ Agentrix åç«¯æœåŠ¡æŒ‡å—

## ğŸ” å½“å‰çŠ¶æ€

- âœ… ç«¯å£3001æœªè¢«å ç”¨ï¼ˆæœåŠ¡æœªè¿è¡Œï¼‰
- âŒ curlæ— è¾“å‡ºï¼ˆæœåŠ¡æœªè¿è¡Œï¼‰

## ğŸš€ å¯åŠ¨æ­¥éª¤

### æ­¥éª¤1: è¿›å…¥åç«¯ç›®å½•

```bash
cd backend
```

### æ­¥éª¤2: æ£€æŸ¥ä¾èµ–

```bash
# å¦‚æœnode_modulesä¸å­˜åœ¨ï¼Œéœ€è¦å®‰è£…
if [ ! -d "node_modules" ]; then
    echo "å®‰è£…ä¾èµ–..."
    npm install
fi
```

### æ­¥éª¤3: æ£€æŸ¥ç¯å¢ƒé…ç½®

åç«¯éœ€è¦ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼Œæœ‰é»˜è®¤å€¼ï¼‰ï¼š

```bash
# æ£€æŸ¥.envæ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la .env

# å¦‚æœæ²¡æœ‰.envæ–‡ä»¶ï¼Œå¯ä»¥åˆ›å»ºï¼ˆä½¿ç”¨é»˜è®¤å€¼ï¼‰
# æˆ–è€…ç›´æ¥å¯åŠ¨ï¼Œä½¿ç”¨ä»£ç ä¸­çš„é»˜è®¤å€¼
```

**é»˜è®¤é…ç½®**ï¼ˆå¦‚æœ.envä¸å­˜åœ¨ï¼‰ï¼š
- æ•°æ®åº“: `localhost:5432`
- æ•°æ®åº“ç”¨æˆ·: `agentrix`
- æ•°æ®åº“å¯†ç : `agentrix_password`
- æ•°æ®åº“å: `agentrix_db`
- ç«¯å£: `3001`

### æ­¥éª¤4: å¯åŠ¨æœåŠ¡

```bash
npm run start:dev
```

### æ­¥éª¤5: ç­‰å¾…å¯åŠ¨å®Œæˆ

ç­‰å¾…30-60ç§’ï¼Œçœ‹åˆ°ä»¥ä¸‹è¾“å‡ºè¡¨ç¤ºæˆåŠŸï¼š

```
ğŸš€ Agentrix Backend is running on: http://0.0.0.0:3001
ğŸ“š API Documentation: http://0.0.0.0:3001/api/docs
```

---

## ğŸ› å¸¸è§å¯åŠ¨é”™è¯¯

### é”™è¯¯1: æ•°æ®åº“è¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯**: `Unable to connect to the database`

**è§£å†³æ–¹æ¡ˆ**:

#### é€‰é¡¹A: ä½¿ç”¨é»˜è®¤PostgreSQLé…ç½®

```bash
# æ£€æŸ¥PostgreSQLæ˜¯å¦è¿è¡Œ
pg_isready -h localhost -p 5432

# å¦‚æœæœªè¿è¡Œï¼Œå¯åŠ¨PostgreSQL
sudo service postgresql start

# åˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·ï¼ˆå¦‚æœéœ€è¦ï¼‰
sudo -u postgres psql
```

åœ¨psqlä¸­æ‰§è¡Œï¼š
```sql
CREATE USER agentrix WITH PASSWORD 'agentrix_password';
CREATE DATABASE agentrix_db OWNER agentrix;
GRANT ALL PRIVILEGES ON DATABASE agentrix_db TO agentrix;
\q
```

#### é€‰é¡¹B: ä¿®æ”¹.envæ–‡ä»¶ä½¿ç”¨ç°æœ‰PostgreSQL

åˆ›å»º `backend/.env`:
```env
DB_HOST=localhost
DB_PORT=5432
DB_USERNAME=postgres
DB_PASSWORD=postgres
DB_DATABASE=agentrix
```

### é”™è¯¯2: ç«¯å£è¢«å ç”¨

**é”™è¯¯ä¿¡æ¯**: `EADDRINUSE: address already in use :::3001`

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :3001

# æ€æ­»è¿›ç¨‹
kill -9 <PID>

# æˆ–ä½¿ç”¨ä¸åŒç«¯å£
PORT=3002 npm run start:dev
```

### é”™è¯¯3: ä¾èµ–ç¼ºå¤±

**é”™è¯¯ä¿¡æ¯**: `Cannot find module 'xxx'`

**è§£å†³æ–¹æ¡ˆ**:
```bash
rm -rf node_modules package-lock.json
npm install
```

### é”™è¯¯4: TypeScriptç¼–è¯‘é”™è¯¯

**é”™è¯¯ä¿¡æ¯**: ç¼–è¯‘å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
npm run build

# ä¿®å¤é”™è¯¯åé‡æ–°å¯åŠ¨
npm run start:dev
```

---

## âœ… éªŒè¯æœåŠ¡å·²å¯åŠ¨

### æ–¹æ³•1: æ£€æŸ¥ç«¯å£

```bash
lsof -i :3001
```

åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š
```
node    12345  user   23u  IPv6  ...  TCP *:3001 (LISTEN)
```

### æ–¹æ³•2: æµ‹è¯•API

```bash
curl http://localhost:3001/api
```

åº”è¯¥è¿”å›JSONå“åº”ã€‚

### æ–¹æ³•3: æµ‹è¯•Swaggeræ–‡æ¡£

```bash
curl http://localhost:3001/api/docs
```

åº”è¯¥è¿”å›HTMLé¡µé¢ã€‚

### æ–¹æ³•4: æµè§ˆå™¨è®¿é—®

æ‰“å¼€æµè§ˆå™¨ï¼š
- http://localhost:3001/api/docs

---

## ğŸ“‹ å®Œæ•´å¯åŠ¨å‘½ä»¤ï¼ˆä¸€é”®æ‰§è¡Œï¼‰

```bash
cd backend

# æ£€æŸ¥å¹¶å®‰è£…ä¾èµ–
if [ ! -d "node_modules" ]; then
    npm install
fi

# å¯åŠ¨æœåŠ¡
npm run start:dev
```

---

## ğŸ”§ å¦‚æœæ•°æ®åº“è¿æ¥å¤±è´¥ä½†æƒ³å…ˆå¯åŠ¨æœåŠ¡

å¯ä»¥ä¸´æ—¶ç¦ç”¨æ•°æ®åº“è¿æ¥æ£€æŸ¥ï¼ˆä»…ç”¨äºæµ‹è¯•ï¼‰ï¼š

**æ³¨æ„**: è¿™ä¼šå¯¼è‡´æ•°æ®åº“ç›¸å…³åŠŸèƒ½ä¸å¯ç”¨ï¼Œä½†æœåŠ¡å¯ä»¥å¯åŠ¨ã€‚

ä¿®æ”¹ `backend/src/app.module.ts`ï¼Œä¸´æ—¶æ³¨é‡ŠTypeORMï¼š

```typescript
// ä¸´æ—¶æ³¨é‡Š
// TypeOrmModule.forRootAsync({
//   useClass: DatabaseConfig,
// }),
```

**ä¸æ¨è**ï¼Œæœ€å¥½å…ˆé…ç½®å¥½æ•°æ®åº“ã€‚

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœå¯åŠ¨å¤±è´¥ï¼Œè¯·æä¾›ï¼š

1. **å®Œæ•´é”™è¯¯æ—¥å¿—**ï¼ˆä»npm run start:devçš„è¾“å‡ºï¼‰
2. **æ•°æ®åº“çŠ¶æ€**ï¼ˆ`pg_isready -h localhost -p 5432`çš„ç»“æœï¼‰
3. **ç¯å¢ƒä¿¡æ¯**ï¼ˆ`node --version`, `npm --version`ï¼‰

---

**ä¸‹ä¸€æ­¥**: è¿è¡Œ `npm run start:dev` å¯åŠ¨æœåŠ¡

